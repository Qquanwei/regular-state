{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 345e6a093849698a8d07","webpack:///./src/index.js","webpack:///external \"Regular\"","webpack:///./src/server.js","webpack:///./~/regularjs/src/render/server.js","webpack:///./~/regularjs/src/util.js","webpack:///(webpack)/~/node-libs-browser/~/timers-browserify/main.js","webpack:///(webpack)/~/node-libs-browser/~/process/browser.js","webpack:///./~/regularjs/src/helper/shim.js","webpack:///./~/regularjs/src/helper/entities.js","webpack:///./~/regularjs/src/config.js","webpack:///./~/regularjs/src/helper/parse.js","webpack:///./~/regularjs/src/env.js","webpack:///./~/regularjs/src/parser/Parser.js","webpack:///./~/regularjs/src/parser/node.js","webpack:///./~/regularjs/src/parser/Lexer.js","webpack:///./~/regularjs/src/helper/diff.js","webpack:///./~/regularjs/src/render/shared.js","webpack:///./~/stateman/src/manager/server.js","webpack:///./~/stateman/src/util.js","webpack:///./~/stateman/src/manager/base.js","webpack:///./~/stateman/src/state.js","webpack:///./src/util.js","webpack:///./src/base.js","webpack:///./src/extension.js","webpack:///./src/client.js","webpack:///./~/stateman/src/index.js","webpack:///./~/stateman/src/manager/client.js","webpack:///./~/stateman/src/history.js","webpack:///./~/stateman/src/browser.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;;AAGA;;;AAGA;AACA,oC;AACA,EAAC;AACD;AACA;;;;AAIA;;AAEA;;;;;;;;AChBA,gD;;;;;;;ACCA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,4BAA2B;AAC3B;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;;AAEA;;AAEA;AACA;AACA;;AAEA,yC;;AAEA,mBAAkB,SAAS;;AAE3B;;AAEA;AACA;;AAEA;AACA,QAAO;;AAEP;AACA;AACA,aAAY,4B;AACZ,IAAG;AACH;;AAEA;;AAEA,2B;;;;;;ACvEA;;;AAGA;AACA;AACA;AACA;;;;;;;AAOA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB;;AAEA;;AAEA;AACA;;;AAGA,qCAAoC;;;AAGpC;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA,uB;;AAEA;;AAEA;;AAEA;;AAEA,MAAK;;AAEL;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;;AAEA;AACA;AACA;;AAEA,gD;AACA;AACA,IAAG;;;AAGH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;AAIA;;AAEA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA;AACA;AACA,IAAG;AACH;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kB;;AAEA;;AAEA;;AAEA;AACA,mCAAkC,qBAAqB;;AAEvD,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,8CAA6C;AAC7C;AACA;AACA;;AAEA,IAAG;;AAEH;;;;;AAKA,KAAI,UAAU,KAAK;AACnB;AACA;AACA;;;AAGA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;AACA,iC;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,iD;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;;;;;6DCvRA;;;;AAIA;AACA;AACA;AACA,gBAAe;AACf;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA,4CAA2C,SAAS;AACpD;AACA;AACA,Q;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA,0DAAyD,0CAA0C;;;AAGnG;AACA;AACA,mDAAkD,SAAS;AAC3D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,kBAAkB;AAC1C,wBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA2E;AAC3E,2BAA0B;AAC1B,wBAAuB,gBAAgB;AACvC;AACA;AACA,2BAA0B,aAAa;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,kCAAiC;AACjC,wBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA,gBAAe;;AAEf;AACA,MAAK;AACL;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,SAAS;AAC9C;;AAEA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA,wCAAuC;AACvC;AACA;AACA,SAAQ,OAAO;AACf;AACA,yD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,iCAAgC;AAChC,8BAA6B;AAC7B;AACA,IAAG;AACH;;;AAGA,gGAA+F;;AAE/F;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAoB;AACpB;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,QAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA6B;AAC7B,4BAA2B;AAC3B,4BAA2B;AAC3B,+BAA8B;AAC9B,gCAA+B;AAC/B;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,mCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA0B;AAC1B,cAAa,YAAY;AACzB;AACA;AACA;;;AAGA;AACA;AACA,sCAAqC,SAAS;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;AAKA;AACA;AACA;;AAEA,wBAAuB;AACvB,uBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B,4BAA2B;AAC3B,4BAA2B;AAC3B,+BAA8B;AAC9B,gCAA+B;AAC/B;AACA;;AAEA,EAAC;;;;;;;;;;;;;;;AC3dD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,iBAAiB;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA,G;;;;;;;AC3EA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA2B;AAC3B;AACA;AACA;AACA,6BAA4B,UAAU;;;;;;;AC1FtC;AACA;AACA,eAAc;;AAEd;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA;AACA;AACA,4CAA2C,SAAS;AACpD;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;;;;;;;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA,4B;;;;;;;AClQA;AACA,cAAa;AACb,YAAW;AACX;AACA,E;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA8E,4BAA4B;AAC1G;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA,EAAC;;;AAGD;AACA;AACA;AACA;AACA;;;;;;;;ACZA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,OAAM,UAAU,WAAW,MAAM,OAAO,aAAa;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,uCAAsC;;AAEtC;AACA;AACA;AACA,wDAAuD;AACvD,QAAO;AACP,mBAAkB;AAClB;AACA;AACA;;AAEA,MAAK;AACL;AACA;;AAEA,yCAAwC;AACxC;AACA;AACA;AACA;AACA,yCAAwC;;AAExC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,6BAA4B,iCAAiC,mBAAmB,4BAA4B,WAAW,YAAY,EAAE,aAAa;AAClJ;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA,aAAY;AACZ;AACA;AACA,2B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK,KAAK;AACV;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG,KAAK;AACR,oDAAmD;AACnD;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iC;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iC;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,4BAA2B;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB,WAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;;;;;;ACtsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvDA;AACA;;AAEA;AACA,oBAAmB,EAAE,KAAK,YAAY;AACtC;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,iBAAgB;AAChB,kBAAiB;;AAEjB;AACA;AACA,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAe,YAAY;;AAE3B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mCAAkC,OAAO;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,qBAAoB;AACpB,qCAAoC,UAAU;AAC9C;AACA;AACA,kCAAiC,mBAAmB;AACpD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,sCAAqC,OAAO;AAC5C,uB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,4BAA2B,OAAO;AAClC,0C;AACA,2D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,8BAA6B,MAAM;AACnC;AACA,qBAAoB;AACpB,IAAG;;AAEH;AACA,8BAA6B,MAAM;AACnC;AACA,qBAAoB;AACpB,IAAG;;AAEH,uD;AACA;AACA,qBAAoB;AACpB,IAAG;;AAEH;;AAEA;AACA;AACA,gBAAe,KAAK;AACpB,yBAAwB;;AAExB,kBAAiB,KAAK,0BAA0B;AAChD,aAAY;AACZ,IAAG;AACH,qBAAoB,KAAK;AACzB;AACA,aAAY;AACZ,IAAG;;AAEH;AACA,wBAAuB,MAAM;AAC7B;AACA,IAAG;;;AAGH;AACA;AACA,aAAY;AACZ,IAAG;AACH,yE;AACA;;AAEA,aAAY;AACZ,IAAG;;AAEH,iBAAgB,MAAM;AACtB;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA,gBAAe,MAAM,EAAE,MAAM,GAAG,MAAM;AACtC;AACA;AACA;AACA;AACA,IAAG;AACH,iBAAgB,IAAI;AACpB,yDAAwD;AACxD;AACA;AACA;AACA,eAAc;AACd,MAAK;AACL;AACA,eAAc;AACd;AACA,IAAG;AACH,iBAAgB,MAAM,OAAO,MAAM,KAAK,IAAI;AAC5C;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,mBAAkB,MAAM,gBAAgB,IAAI;AAC5C;AACA,IAAG;AACH,qBAAoB,MAAM;AAC1B;AACA,mCAAkC;AAClC;AACA;AACA;AACA,iBAAgB;AAChB,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH,iBAAgB,MAAM;AACtB;AACA,gFAA+E;AAC/E,aAAY;AACZ,IAAG;;AAEH,iEAAgE;AAChE,aAAY;AACZ,IAAG;AACH;AACA,aAAY;AACZ,IAAG;AACH;;;AAGA;AACA;;;;AAIA;;;;;;;AC/VA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,WAAW;AAC3B;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,QAAQ;AACxB;AACA;AACA,eAAc,KAAK;AACnB;AACA;AACA,iBAAgB,QAAQ;AACxB,mBAAkB,QAAQ;AAC1B;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,wBAAuB;AACvB;AACA;AACA,MAAK;AACL;AACA,0BAAyB;AACzB,QAAO;AACP,0BAAyB;AACzB;AACA;AACA;AACA;AACA,MAAK;AACL,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA,eAAc;;AAEd,eAAc,eAAe;AAC7B,uBAAsB;AACtB;AACA;AACA;AACA,MAAK,OAAO;AACZ;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,OAAO,IAAI;AAC3B,iBAAgB,OAAO;AACvB;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA,E;;;;;;ACxLA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA,mDAAkD;AAClD;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,qCAAoC;AACpC;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,Q;AACA;AACA;AACA;AACA,EAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,UAAU;AACjD,kE;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,gF;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;AChIA;AACA;;AAEA;AACA,+CAA8C,mCAAmC;AACjF;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;;;AAGD,+B;;;;;;ACvCA;AACA,kCAAiC;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,4BAA2B;AAC3B;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT,8CAA6C,SAAS;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA,4BAA2B;;AAE3B;AACA;;AAEA;AACA,0CAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAoB;;AAEpB;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA0C,GAAG;AAC7C;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,iEAAgE,GAAG;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,U;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iEAAgE;AAChE;;AAEA;;AAEA;;AAEA;;AAEA;;;;;;;;AC7LA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gE;AACA,MAAK;;;AAGL;;AAEA,6CAA4C,aAAa,EAAE;;AAE3D,MAAK;;AAEL;;AAEA;AACA;AACA;AACA,sBAAqB,QAAQ;AAC7B;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,uBAAsB,SAAS;;AAE/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL,EAAC;;AAED;;;;;;;;AC1IA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,8CAA6C,iBAAiB;AAC9D,IAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA,oCAAmC,MAAM;AACzC;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;;AAEA,EAAC;;AAED;;;;;;;;AC5JA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA,kBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;;;;;AAKA,uB;;;;;;AClCA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,IAAG;AACH;AACA;;;;;AAKA;;;;;;;;AC7DA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAW,IAAI,WAAW;AAC1B,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,IAAG;AACH;;;;;;;;;AC/EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAA+B;AAC/B;AACA,cAAa;AACb,YAAW;AACX;AACA;;AAEA;;AAEA;;;AAGA;AACA,UAAS;AACT;AACA;AACA,YAAW;AACX;AACA,UAAS;;;;AAIT,QAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;;AAET;;AAEA;;AAEA,UAAS;AACT;AACA;AACA,UAAS;;AAET,QAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;;;;;;;AC3JA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;AAGA;;AAEA;;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,0CAAyC,8BAA8B;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;;AAEA;;AAEA;AACA,+D;AACA;AACA;AACA;AACA,Q;AACA;;AAEA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAwC,gBAAgB;;AAExD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sCAAsC;AAC7D;;AAEA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,wCAAuC,aAAa;AACpD;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;;;AAGA;AACA,MAAK;AACL;AACA;;AAEA;;;;AAIA,+DAA8D,iBAAiB;;;AAG/E;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,6CAA4C,YAAY;AACxD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0CAAyC,aAAa;;AAEtD;;AAEA;;AAEA,U;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA,UAAS;;AAET,QAAO;;;AAGP,MAAK;AACL;;AAEA;;AAEA;;AAEA;;AAEA,qBAAoB,SAAS;AAC7B;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,UAAS;;;AAGT,QAAO;;AAEP,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6EAA4E,wBAAwB,EAAE;;AAEtG;;;AAGA;AACA;;AAEA;;AAEA;;AAEA,UAAS;;AAET;AACA;;AAEA;;AAEA;;AAEA,QAAO;;AAEP;AACA,MAAK;;AAEL;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,kD;;AAEA;;AAEA;AACA;;AAEA,MAAK;;;AAGL;;AAEA,gD;AACA;AACA;AACA,qB;AACA,QAAO;;AAEP,MAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA;;AAEA;;AAEA,MAAK;;AAEL;;AAEA;AACA;AACA;AACA,sBAAqB,QAAQ;AAC7B;AACA;AACA;AACA;AACA;;AAEA,MAAK;;AAEL;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,EAAC;;AAED;;;;;;;;AC/YA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,gCAA+B,iBAAiB;AAChD,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sCAAqC,aAAa;AAClD;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,MAAK;;AAEL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,4DAA2D;AAC3D,IAAG;AACH;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;AAED;;;;;;;AC1NA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA,8BAA6B;AAC7B,8BAA6B,2CAA2C;;AAExE;AACA,8BAA6B;AAC7B,8BAA6B;AAC7B","file":"restate.pack.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"Regular\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"Regular\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"restate\"] = factory(require(\"Regular\"));\n\telse\n\t\troot[\"restate\"] = factory(root[\"Regular\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 345e6a093849698a8d07\n **/","var Regular= require('regularjs');\n\n\nvar Restate;\n\n\nif(  Regular.env.browser !== true ){\n  Restate = require('./server'); \n}else{\n  Restate = require('./client');\n}\n\n\n\nmodule.exports = Restate;\n\nRestate.Regular= Regular;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.js\n ** module id = 0\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Regular\"\n ** module id = 1\n ** module chunks = 0\n **/","\nvar SSR = require('regularjs/src/render/server.js');\nvar Stateman = require('stateman/src/manager/server');\nvar u = require('./util');\n\nvar createRestate = require('./base');\nvar Restate = createRestate( Stateman );\nvar so = Restate.prototype;\n\nso.run = function(path, option){\n  option = option || {};\n  var executed = this.exec(path);\n  var self = this;\n  if(!executed){\n    return Promise.reject({\n      code: 'notfound',\n      message: 'NOT FOUND'\n    });\n  }\n  var param = executed.param;\n  var promises = executed.states.map(function(state){\n    var installOption = {\n      state: state,\n      param: param\n    }\n    return self.install( installOption ).then( function(installed){\n      var data = installed.data;\n      if(!installed.Component){\n        html = \"\";\n      }else{\n        var html = SSR.render( installed.Component, {\n          data: u.extend({}, data), \n          $state: self \n        })\n      }\n      return {\n        name: state.name,\n        html: html,\n        data: data\n      };\n    })\n  })\n\n  return Promise.all( promises).then(function( rendereds ){\n\n    var len = rendereds.length;\n\n    if(!len) return null;\n    var rendered = rendereds[0];\n    var retView = rendered.html, data = {};\n\n    data[rendered.name] = rendered.data; \n\n    for(var i = 1; i < len; i++ ){\n\n      var nextRendered = rendereds[i];\n\n      // <div rg-view >\n      retView = retView.replace(/r-view([^>]*\\>)/, function(all ,capture){\n\n        return capture + nextRendered.html;\n      })\n\n      data[nextRendered.name] = nextRendered.data\n    }\n    return { html: retView, data: data } \n  })\n}\n\nRestate.render = SSR.render;\n\nmodule.exports =  Restate;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/server.js\n ** module id = 2\n ** module chunks = 0\n **/","// server side rendering for regularjs\n\n\nvar _ = require('../util');\nvar parser = require('../helper/parse');\nvar diffArray = require('../helper/diff').diffArray;\nvar shared = require('./shared');\n\n\n\n\n\n\n/**\n * [compile description]\n * @param  {[type]} ast     [description]\n * @param  {[type]} options [description]\n */\n\nfunction SSR (Component){\n\n  this.Component = Component;\n}\n\n\nvar ssr = _.extend(SSR.prototype, {});\n\n\nssr.render = function( definition){\n\n  definition = definition || {};\n\n  var context = this.context = Object.create(this.Component.prototype)\n\n  var template = shared.initDefinition(context, definition);\n\n  return this.compile(template);\n\n}\n\nssr.compile = function(ast){\n\n  if(typeof ast === 'string'){\n    ast = parser.parse(ast);\n  }\n  return this.walk(ast)\n}\n\n\nssr.walk = function(ast, options){\n\n  var type = ast.type; \n\n  if(Array.isArray(ast)){\n\n    return ast.map(function(item){\n\n      return this.walk(item, options)\n\n    }.bind(this)).join('');\n\n  }\n\n  return this[ast.type](ast, options)\n\n}\n\n\nssr.element = function(ast ){\n\n  var children = ast.children,\n    attrs = ast.attrs,\n    tag = ast.tag;\n\n  if( tag === 'r-component' ){\n    attrs.some(function(attr){\n      if(attr.name === 'is'){\n        tag = attr.value;\n        if( _.isExpr(attr.value)) tag = this.get(attr.value);\n        return true;\n      }\n    }.bind(this))\n  }\n\n  var Component = this.Component.component(tag);\n\n  if(ast.tag === 'r-component' && !Component){\n    throw Error('r-component with unregister component ' + tag)\n  }\n\n  if( Component ) return this.component( ast, { \n    Component: Component \n  } );\n\n\n  var tagObj = {\n    body: (children && children.length? this.compile(children): \"\")\n  }\n  var attrStr = this.walk(attrs, tagObj).trim();\n\n  return \"<\" + tag + (attrStr? \" \" + attrStr: \"\"  ) + \">\" +  \n        tagObj.body +\n    \"</\" + tag + \">\"\n\n}\n\n\n\nssr.component = function(ast, options){\n\n  var children = ast.children,\n    attrs = ast.attrs,\n    data = {},\n    Component = options.Component, body;\n\n  if(children && children.length){\n    body = function(){\n      return this.compile(children)\n    }.bind(this)\n  }\n\n  attrs.forEach(function(attr){\n    if(!_.eventReg.test(attr.name)){\n      data[attr.name] = _.isExpr(attr.value)? this.get(attr.value): attr.value\n    }\n  }.bind(this))\n\n\n  return SSR.render(Component, {\n    $body: body,\n    data: data,\n    extra: this.extra\n  })\n}\n\n\n\nssr.list = function(ast){\n\n  var \n    alternate = ast.alternate,\n    variable = ast.variable,\n    indexName = variable + '_index',\n    keyName = variable + '_key',\n    body = ast.body,\n    context = this.context,\n    self = this,\n    prevExtra = context.extra;\n\n  var sequence = this.get(ast.sequence);\n  var keys, list; \n\n  var type = _.typeOf(sequence);\n\n  if( type === 'object'){\n\n    keys = Object.keys(list);\n    list = keys.map(function(key){return sequence[key]})\n\n  }else{\n\n    list = sequence || [];\n\n  }\n\n  return list.map(function(item, item_index){\n\n    var sectionData = {};\n    sectionData[variable] = item;\n    sectionData[indexName] = item_index;\n    if(keys) sectionData[keyName] = sequence[item_index];\n    context.extra = _.extend(\n      prevExtra? Object.create(prevExtra): {}, sectionData );\n    var section =  this.compile( body );\n    context.extra = prevExtra;\n    return section;\n\n  }.bind(this)).join('');\n\n}\n\n\n\n\n// {#include } or {#inc template}\nssr.template = function(ast, options){\n  var content = this.get(ast.content);\n  var type = typeof content;\n\n\n  if(!content) return '';\n  if(type === 'function' ){\n    return content();\n  }else{\n    return this.compile(type !== 'object'? String(content): content)\n  }\n\n};\n\nssr.if = function(ast, options){\n  var test = this.get(ast.test);  \n  if(test){\n    if(ast.consequent){\n      return this.walk( ast.consequent, options );\n    }\n  }else{\n    if(ast.alternate){\n      return this.walk( ast.alternate, options );\n    }\n  }\n}\n\n\nssr.expression = function(ast, options){\n  var str = this.get(ast);\n  return _.escape(str);\n}\n\nssr.text = function(ast, options){\n  return _.escape(ast.text) \n}\n\n\n\nssr.attribute = function(attr, options){\n\n  var\n    Component = this.Component,\n    directive = Component.directive(attr.name);\n\n  \n  shared.prepareAttr(attr, directive);\n  \n  var name = attr.name, \n    value = attr.value || \"\";\n\n  if( directive ){\n    if(directive.ssr){\n\n      // @TODO: 应该提供hook可以控制节点内部  ,比如r-html\n      return directive.ssr.call(this.context, _.isExpr(value)? this.get(value): value ,options);\n    }\n  }else{\n    // @TODO 对于boolean 值\n    if(_.isExpr(value)) value = this.get(value); \n    if(_.isBooleanAttr(name) || value === undefined || value === null){\n      return name + \" \";\n    }else{\n      return name + '=\"' + _.escape(value) + '\" ';\n    }\n  }\n}\n\nssr.get = function(expr){\n\n  var rawget, \n    self = this,\n    context = this.context,\n    touched = {};\n\n  if(expr.get) return expr.get(context);\n  else {\n    var rawget = new Function(_.ctxName, _.extName , _.prefix+ \"return (\" + expr.body + \")\")\n    expr.get = function(context){\n      return rawget(context, context.extra)\n    }\n    return expr.get(this.context)\n  }\n\n}\n\nSSR.render = function(Component, definition){\n\n  return new SSR(Component).render( definition );\n\n}\n\nSSR.escape = _.escape;\n\nmodule.exports = SSR;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/regularjs/src/render/server.js\n ** module id = 3\n ** module chunks = 0\n **/","require('./helper/shim')();\n\n\n\nvar _  = module.exports;\nvar entities = require('./helper/entities');\nvar slice = [].slice;\nvar o2str = ({}).toString;\nvar win = typeof window !=='undefined'? window: global;\nvar config = require('./config');\n\n\n_.noop = function(){};\n_.uid = (function(){\n  var _uid=0;\n  return function(){\n    return _uid++;\n  }\n})();\n\n_.extend = function( o1, o2, override ){\n  // if(_.typeOf(override) === 'array'){\n  //  for(var i = 0, len = override.length; i < len; i++ ){\n  //   var key = override[i];\n  //   o1[key] = o2[key];\n  //  } \n  // }else{\n  for(var i in o2){\n    if( typeof o1[i] === \"undefined\" || override === true ){\n      o1[i] = o2[i]\n    }\n  }\n  // }\n  return o1;\n}\n\n_.keys = function(obj){\n  if(Object.keys) return Object.keys(obj);\n  var res = [];\n  for(var i in obj) if(obj.hasOwnProperty(i)){\n    res.push(i);\n  }\n  return res;\n}\n\n_.varName = 'd';\n_.setName = 'p_';\n_.ctxName = 'c';\n_.extName = 'e';\n\n_.rWord = /^[\\$\\w]+$/;\n_.rSimpleAccessor = /^[\\$\\w]+(\\.[\\$\\w]+)*$/;\n\n_.nextTick = typeof setImmediate === 'function'? \n  setImmediate.bind(win) : \n  function(callback) {\n    setTimeout(callback, 0) \n  }\n\n\n\n_.prefix = \"var \" + _.varName + \"=\" + _.ctxName + \".data;\" +  _.extName  + \"=\" + _.extName + \"||'';\";\n\n\n_.slice = function(obj, start, end){\n  var res = [];\n  for(var i = start || 0, len = end || obj.length; i < len; i++){\n    var item = obj[i];\n    res.push(item)\n  }\n  return res;\n}\n\n_.typeOf = function (o) {\n  return o == null ? String(o) :o2str.call(o).slice(8, -1).toLowerCase();\n}\n\n\n_.makePredicate = function makePredicate(words, prefix) {\n    if (typeof words === \"string\") {\n        words = words.split(\" \");\n    }\n    var f = \"\",\n    cats = [];\n    out: for (var i = 0; i < words.length; ++i) {\n        for (var j = 0; j < cats.length; ++j){\n          if (cats[j][0].length === words[i].length) {\n              cats[j].push(words[i]);\n              continue out;\n          }\n        }\n        cats.push([words[i]]);\n    }\n    function compareTo(arr) {\n        if (arr.length === 1) return f += \"return str === '\" + arr[0] + \"';\";\n        f += \"switch(str){\";\n        for (var i = 0; i < arr.length; ++i){\n           f += \"case '\" + arr[i] + \"':\";\n        }\n        f += \"return true}return false;\";\n    }\n\n    // When there are more than three length categories, an outer\n    // switch first dispatches on the lengths, to save on comparisons.\n    if (cats.length > 3) {\n        cats.sort(function(a, b) {\n            return b.length - a.length;\n        });\n        f += \"switch(str.length){\";\n        for (var i = 0; i < cats.length; ++i) {\n            var cat = cats[i];\n            f += \"case \" + cat[0].length + \":\";\n            compareTo(cat);\n        }\n        f += \"}\";\n\n        // Otherwise, simply generate a flat `switch` statement.\n    } else {\n        compareTo(words);\n    }\n    return new Function(\"str\", f);\n}\n\n\n_.trackErrorPos = (function (){\n  // linebreak\n  var lb = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n  var minRange = 20, maxRange = 20;\n  function findLine(lines, pos){\n    var tmpLen = 0;\n    for(var i = 0,len = lines.length; i < len; i++){\n      var lineLen = (lines[i] || \"\").length;\n\n      if(tmpLen + lineLen > pos) {\n        return {num: i, line: lines[i], start: pos - i - tmpLen , prev:lines[i-1], next: lines[i+1] };\n      }\n      // 1 is for the linebreak\n      tmpLen = tmpLen + lineLen ;\n    }\n  }\n  function formatLine(str,  start, num, target){\n    var len = str.length;\n    var min = start - minRange;\n    if(min < 0) min = 0;\n    var max = start + maxRange;\n    if(max > len) max = len;\n\n    var remain = str.slice(min, max);\n    var prefix = \"[\" +(num+1) + \"] \" + (min > 0? \"..\" : \"\")\n    var postfix = max < len ? \"..\": \"\";\n    var res = prefix + remain + postfix;\n    if(target) res += \"\\n\" + new Array(start-min + prefix.length + 1).join(\" \") + \"^^^\";\n    return res;\n  }\n  return function(input, pos){\n    if(pos > input.length-1) pos = input.length-1;\n    lb.lastIndex = 0;\n    var lines = input.split(lb);\n    var line = findLine(lines,pos);\n    var start = line.start, num = line.num;\n\n    return (line.prev? formatLine(line.prev, start, num-1 ) + '\\n': '' ) + \n      formatLine(line.line, start, num, true) + '\\n' + \n      (line.next? formatLine(line.next, start, num+1 ) + '\\n': '' );\n\n  }\n})();\n\n\nvar ignoredRef = /\\((\\?\\!|\\?\\:|\\?\\=)/g;\n_.findSubCapture = function (regStr) {\n  var left = 0,\n    right = 0,\n    len = regStr.length,\n    ignored = regStr.match(ignoredRef); // ignored uncapture\n  if(ignored) ignored = ignored.length\n  else ignored = 0;\n  for (; len--;) {\n    var letter = regStr.charAt(len);\n    if (len === 0 || regStr.charAt(len - 1) !== \"\\\\\" ) { \n      if (letter === \"(\") left++;\n      if (letter === \")\") right++;\n    }\n  }\n  if (left !== right) throw \"RegExp: \"+ regStr + \"'s bracket is not marched\";\n  else return left - ignored;\n};\n\n\n_.escapeRegExp = function( str){// Credit: XRegExp 0.6.1 (c) 2007-2008 Steven Levithan <http://stevenlevithan.com/regex/xregexp/> MIT License\n  return str.replace(/[-[\\]{}()*+?.\\\\^$|,#\\s]/g, function(match){\n    return '\\\\' + match;\n  });\n};\n\n\nvar rEntity = new RegExp(\"&(?:(#x[0-9a-fA-F]+)|(#[0-9]+)|(\" + _.keys(entities).join('|') + '));', 'gi');\n\n_.convertEntity = function(chr){\n\n  return (\"\" + chr).replace(rEntity, function(all, hex, dec, capture){\n    var charCode;\n    if( dec ) charCode = parseInt( dec.slice(1), 10 );\n    else if( hex ) charCode = parseInt( hex.slice(2), 16 );\n    else charCode = entities[capture]\n\n    return String.fromCharCode( charCode )\n  });\n\n}\n\n\n// simple get accessor\n\n_.createObject = function(o, props){\n    function Foo() {}\n    Foo.prototype = o;\n    var res = new Foo;\n    if(props) _.extend(res, props);\n    return res;\n}\n\n_.createProto = function(fn, o){\n    function Foo() { this.constructor = fn;}\n    Foo.prototype = o;\n    return (fn.prototype = new Foo());\n}\n\n\n\n/**\nclone\n*/\n_.clone = function clone(obj){\n    var type = _.typeOf(obj);\n    if(type === 'array'){\n      var cloned = [];\n      for(var i=0,len = obj.length; i< len;i++){\n        cloned[i] = obj[i]\n      }\n      return cloned;\n    }\n    if(type === 'object'){\n      var cloned = {};\n      for(var i in obj) if(obj.hasOwnProperty(i)){\n        cloned[i] = obj[i];\n      }\n      return cloned;\n    }\n    return obj;\n  }\n\n_.equals = function(now, old){\n  var type = typeof now;\n  if(type === 'number' && typeof old === 'number'&& isNaN(now) && isNaN(old)) return true\n  return now === old;\n}\n\nvar dash = /-([a-z])/g;\n_.camelCase = function(str){\n  return str.replace(dash, function(all, capture){\n    return capture.toUpperCase();\n  })\n}\n\n\n\n_.throttle = function throttle(func, wait){\n  var wait = wait || 100;\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  var later = function() {\n    previous = +new Date;\n    timeout = null;\n    result = func.apply(context, args);\n    context = args = null;\n  };\n  return function() {\n    var now = + new Date;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      clearTimeout(timeout);\n      timeout = null;\n      previous = now;\n      result = func.apply(context, args);\n      context = args = null;\n    } else if (!timeout) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n};\n\n// hogan escape\n// ==============\n_.escape = (function(){\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  return function(str) {\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n})();\n\n_.cache = function(max){\n  max = max || 1000;\n  var keys = [],\n      cache = {};\n  return {\n    set: function(key, value) {\n      if (keys.length > this.max) {\n        cache[keys.shift()] = undefined;\n      }\n      // \n      if(cache[key] === undefined){\n        keys.push(key);\n      }\n      cache[key] = value;\n      return value;\n    },\n    get: function(key) {\n      if (key === undefined) return cache;\n      return cache[key];\n    },\n    max: max,\n    len:function(){\n      return keys.length;\n    }\n  };\n}\n\n// // setup the raw Expression\n// _.touchExpression = function(expr){\n//   if(expr.type === 'expression'){\n//   }\n//   return expr;\n// }\n\n\n// handle the same logic on component's `on-*` and element's `on-*`\n// return the fire object\n_.handleEvent = function(value, type ){\n  var self = this, evaluate;\n  if(value.type === 'expression'){ // if is expression, go evaluated way\n    evaluate = value.get;\n  }\n  if(evaluate){\n    return function fire(obj){\n      self.$update(function(){\n        var data = this.data;\n        data.$event = obj;\n        var res = evaluate(self);\n        if(res === false && obj && obj.preventDefault) obj.preventDefault();\n        data.$event = undefined;\n      })\n\n    }\n  }else{\n    return function fire(){\n      var args = slice.call(arguments)      \n      args.unshift(value);\n      self.$update(function(){\n        self.$emit.apply(self, args);\n      })\n    }\n  }\n}\n\n// only call once\n_.once = function(fn){\n  var time = 0;\n  return function(){\n    if( time++ === 0) fn.apply(this, arguments);\n  }\n}\n\n_.fixObjStr = function(str){\n  if(str.trim().indexOf('{') !== 0){\n    return '{' + str + '}';\n  }\n  return str;\n}\n\n\n_.map= function(array, callback){\n  var res = [];\n  for (var i = 0, len = array.length; i < len; i++) {\n    res.push(callback(array[i], i));\n  }\n  return res;\n}\n\nfunction log(msg, type){\n  if(typeof console !== \"undefined\")  console[type || \"log\"](msg);\n}\n\n_.log = log;\n\n\n\n\n//http://www.w3.org/html/wg/drafts/html/master/single-page.html#void-elements\n_.isVoidTag = _.makePredicate(\"area base br col embed hr img input keygen link menuitem meta param source track wbr r-content\");\n_.isBooleanAttr = _.makePredicate('selected checked disabled readonly required open autofocus controls autoplay compact loop defer multiple');\n\n_.isFalse - function(){return false}\n_.isTrue - function(){return true}\n\n_.isExpr = function(expr){\n  return expr && expr.type === 'expression';\n}\n// @TODO: make it more strict\n_.isGroup = function(group){\n  return group.inject || group.$inject;\n}\n\n_.blankReg = /\\s+/; \n\n_.getCompileFn = function(source, ctx, options){\n  return function( passedOptions ){\n    if( passedOptions && options ) _.extend( passedOptions , options );\n    else passedOptions = options;\n    return ctx.$compile(source, passedOptions )\n  }\n  return ctx.$compile.bind(ctx,source, options)\n}\n\n_.eventReg = /^on-(\\w[-\\w]+)$/;\n\n_.toText = function(obj){\n  return obj == null ? \"\": \"\" + obj;\n}\n\n\n// hogan\n// https://github.com/twitter/hogan.js\n// MIT\n_.escape = (function(){\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  function ignoreNullVal(val) {\n    return String((val === undefined || val == null) ? '' : val);\n  }\n\n  return function (str) {\n    str = ignoreNullVal(str);\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n\n})();\n\n\n\n\n\n\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/regularjs/src/util.js\n ** module id = 4\n ** module chunks = 0\n **/","var nextTick = require('process/browser.js').nextTick;\nvar apply = Function.prototype.apply;\nvar slice = Array.prototype.slice;\nvar immediateIds = {};\nvar nextImmediateId = 0;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) { timeout.close(); };\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// That's not how node.js implements it but the exposed api is the same.\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n  var id = nextImmediateId++;\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\n  immediateIds[id] = true;\n\n  nextTick(function onNextTick() {\n    if (immediateIds[id]) {\n      // fn.call() is faster so we optimize for the common use-case\n      // @see http://jsperf.com/call-apply-segu\n      if (args) {\n        fn.apply(null, args);\n      } else {\n        fn.call(null);\n      }\n      // Prevent ids from leaking\n      exports.clearImmediate(id);\n    }\n  });\n\n  return id;\n};\n\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n  delete immediateIds[id];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/timers-browserify/main.js\n ** module id = 5\n ** module chunks = 0\n **/","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/process/browser.js\n ** module id = 6\n ** module chunks = 0\n **/","// shim for es5\nvar slice = [].slice;\nvar tstr = ({}).toString;\n\nfunction extend(o1, o2 ){\n  for(var i in o2) if( o1[i] === undefined){\n    o1[i] = o2[i]\n  }\n  return o2;\n}\n\n\nmodule.exports = function(){\n  // String proto ;\n  extend(String.prototype, {\n    trim: function(){\n      return this.replace(/^\\s+|\\s+$/g, '');\n    }\n  });\n\n\n  // Array proto;\n  extend(Array.prototype, {\n    indexOf: function(obj, from){\n      from = from || 0;\n      for (var i = from, len = this.length; i < len; i++) {\n        if (this[i] === obj) return i;\n      }\n      return -1;\n    },\n    // polyfill from MDN \n    // https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\n    forEach: function(callback, ctx){\n      var k = 0;\n\n      // 1. Let O be the result of calling ToObject passing the |this| value as the argument.\n      var O = Object(this);\n\n      var len = O.length >>> 0; \n\n      if ( typeof callback !== \"function\" ) {\n        throw new TypeError( callback + \" is not a function\" );\n      }\n\n      // 7. Repeat, while k < len\n      while( k < len ) {\n\n        var kValue;\n\n        if ( k in O ) {\n\n          kValue = O[ k ];\n\n          callback.call( ctx, kValue, k, O );\n        }\n        k++;\n      }\n    },\n    // @deprecated\n    //  will be removed at 0.5.0\n    filter: function(fun, context){\n\n      var t = Object(this);\n      var len = t.length >>> 0;\n      if (typeof fun !== \"function\")\n        throw new TypeError();\n\n      var res = [];\n      for (var i = 0; i < len; i++)\n      {\n        if (i in t)\n        {\n          var val = t[i];\n          if (fun.call(context, val, i, t))\n            res.push(val);\n        }\n      }\n\n      return res;\n    }\n  });\n\n  // Function proto;\n  extend(Function.prototype, {\n    bind: function(context){\n      var fn = this;\n      var preArgs = slice.call(arguments, 1);\n      return function(){\n        var args = preArgs.concat(slice.call(arguments));\n        return fn.apply(context, args);\n      }\n    }\n  })\n  \n  // Array\n  extend(Array, {\n    isArray: function(arr){\n      return tstr.call(arr) === \"[object Array]\";\n    }\n  })\n}\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/regularjs/src/helper/shim.js\n ** module id = 7\n ** module chunks = 0\n **/","// http://stackoverflow.com/questions/1354064/how-to-convert-characters-to-html-entities-using-plain-javascript\nvar entities = {\n  'quot':34, \n  'amp':38, \n  'apos':39, \n  'lt':60, \n  'gt':62, \n  'nbsp':160, \n  'iexcl':161, \n  'cent':162, \n  'pound':163, \n  'curren':164, \n  'yen':165, \n  'brvbar':166, \n  'sect':167, \n  'uml':168, \n  'copy':169, \n  'ordf':170, \n  'laquo':171, \n  'not':172, \n  'shy':173, \n  'reg':174, \n  'macr':175, \n  'deg':176, \n  'plusmn':177, \n  'sup2':178, \n  'sup3':179, \n  'acute':180, \n  'micro':181, \n  'para':182, \n  'middot':183, \n  'cedil':184, \n  'sup1':185, \n  'ordm':186, \n  'raquo':187, \n  'frac14':188, \n  'frac12':189, \n  'frac34':190, \n  'iquest':191, \n  'Agrave':192, \n  'Aacute':193, \n  'Acirc':194, \n  'Atilde':195, \n  'Auml':196, \n  'Aring':197, \n  'AElig':198, \n  'Ccedil':199, \n  'Egrave':200, \n  'Eacute':201, \n  'Ecirc':202, \n  'Euml':203, \n  'Igrave':204, \n  'Iacute':205, \n  'Icirc':206, \n  'Iuml':207, \n  'ETH':208, \n  'Ntilde':209, \n  'Ograve':210, \n  'Oacute':211, \n  'Ocirc':212, \n  'Otilde':213, \n  'Ouml':214, \n  'times':215, \n  'Oslash':216, \n  'Ugrave':217, \n  'Uacute':218, \n  'Ucirc':219, \n  'Uuml':220, \n  'Yacute':221, \n  'THORN':222, \n  'szlig':223, \n  'agrave':224, \n  'aacute':225, \n  'acirc':226, \n  'atilde':227, \n  'auml':228, \n  'aring':229, \n  'aelig':230, \n  'ccedil':231, \n  'egrave':232, \n  'eacute':233, \n  'ecirc':234, \n  'euml':235, \n  'igrave':236, \n  'iacute':237, \n  'icirc':238, \n  'iuml':239, \n  'eth':240, \n  'ntilde':241, \n  'ograve':242, \n  'oacute':243, \n  'ocirc':244, \n  'otilde':245, \n  'ouml':246, \n  'divide':247, \n  'oslash':248, \n  'ugrave':249, \n  'uacute':250, \n  'ucirc':251, \n  'uuml':252, \n  'yacute':253, \n  'thorn':254, \n  'yuml':255, \n  'fnof':402, \n  'Alpha':913, \n  'Beta':914, \n  'Gamma':915, \n  'Delta':916, \n  'Epsilon':917, \n  'Zeta':918, \n  'Eta':919, \n  'Theta':920, \n  'Iota':921, \n  'Kappa':922, \n  'Lambda':923, \n  'Mu':924, \n  'Nu':925, \n  'Xi':926, \n  'Omicron':927, \n  'Pi':928, \n  'Rho':929, \n  'Sigma':931, \n  'Tau':932, \n  'Upsilon':933, \n  'Phi':934, \n  'Chi':935, \n  'Psi':936, \n  'Omega':937, \n  'alpha':945, \n  'beta':946, \n  'gamma':947, \n  'delta':948, \n  'epsilon':949, \n  'zeta':950, \n  'eta':951, \n  'theta':952, \n  'iota':953, \n  'kappa':954, \n  'lambda':955, \n  'mu':956, \n  'nu':957, \n  'xi':958, \n  'omicron':959, \n  'pi':960, \n  'rho':961, \n  'sigmaf':962, \n  'sigma':963, \n  'tau':964, \n  'upsilon':965, \n  'phi':966, \n  'chi':967, \n  'psi':968, \n  'omega':969, \n  'thetasym':977, \n  'upsih':978, \n  'piv':982, \n  'bull':8226, \n  'hellip':8230, \n  'prime':8242, \n  'Prime':8243, \n  'oline':8254, \n  'frasl':8260, \n  'weierp':8472, \n  'image':8465, \n  'real':8476, \n  'trade':8482, \n  'alefsym':8501, \n  'larr':8592, \n  'uarr':8593, \n  'rarr':8594, \n  'darr':8595, \n  'harr':8596, \n  'crarr':8629, \n  'lArr':8656, \n  'uArr':8657, \n  'rArr':8658, \n  'dArr':8659, \n  'hArr':8660, \n  'forall':8704, \n  'part':8706, \n  'exist':8707, \n  'empty':8709, \n  'nabla':8711, \n  'isin':8712, \n  'notin':8713, \n  'ni':8715, \n  'prod':8719, \n  'sum':8721, \n  'minus':8722, \n  'lowast':8727, \n  'radic':8730, \n  'prop':8733, \n  'infin':8734, \n  'ang':8736, \n  'and':8743, \n  'or':8744, \n  'cap':8745, \n  'cup':8746, \n  'int':8747, \n  'there4':8756, \n  'sim':8764, \n  'cong':8773, \n  'asymp':8776, \n  'ne':8800, \n  'equiv':8801, \n  'le':8804, \n  'ge':8805, \n  'sub':8834, \n  'sup':8835, \n  'nsub':8836, \n  'sube':8838, \n  'supe':8839, \n  'oplus':8853, \n  'otimes':8855, \n  'perp':8869, \n  'sdot':8901, \n  'lceil':8968, \n  'rceil':8969, \n  'lfloor':8970, \n  'rfloor':8971, \n  'lang':9001, \n  'rang':9002, \n  'loz':9674, \n  'spades':9824, \n  'clubs':9827, \n  'hearts':9829, \n  'diams':9830, \n  'OElig':338, \n  'oelig':339, \n  'Scaron':352, \n  'scaron':353, \n  'Yuml':376, \n  'circ':710, \n  'tilde':732, \n  'ensp':8194, \n  'emsp':8195, \n  'thinsp':8201, \n  'zwnj':8204, \n  'zwj':8205, \n  'lrm':8206, \n  'rlm':8207, \n  'ndash':8211, \n  'mdash':8212, \n  'lsquo':8216, \n  'rsquo':8217, \n  'sbquo':8218, \n  'ldquo':8220, \n  'rdquo':8221, \n  'bdquo':8222, \n  'dagger':8224, \n  'Dagger':8225, \n  'permil':8240, \n  'lsaquo':8249, \n  'rsaquo':8250, \n  'euro':8364\n}\n\n\n\nmodule.exports  = entities;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/regularjs/src/helper/entities.js\n ** module id = 8\n ** module chunks = 0\n **/","\nmodule.exports = {\n  'BEGIN': '{',\n  'END': '}',\n  'PRECOMPILE': false\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/regularjs/src/config.js\n ** module id = 9\n ** module chunks = 0\n **/","var exprCache = require('../env').exprCache;\nvar _ = require(\"../util\");\nvar Parser = require(\"../parser/Parser\");\nmodule.exports = {\n  expression: function(expr, simple){\n    // @TODO cache\n    if( typeof expr === 'string' && ( expr = expr.trim() ) ){\n      expr = exprCache.get( expr ) || exprCache.set( expr, new Parser( expr, { mode: 2, expression: true } ).expression() )\n    }\n    if(expr) return expr;\n  },\n  parse: function(template){\n    return new Parser(template).parse();\n  }\n}\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/regularjs/src/helper/parse.js\n ** module id = 10\n ** module chunks = 0\n **/","// some fixture test;\n// ---------------\nvar _ = require('./util');\nexports.svg = (function(){\n  return typeof document !== \"undefined\" && document.implementation.hasFeature( \"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\" );\n})();\n\n\nexports.browser = typeof document !== \"undefined\" && document.nodeType;\n// whether have component in initializing\nexports.exprCache = _.cache(1000);\nexports.node = typeof process !== \"undefined\" && ( '' + process ) === '[object process]';\nexports.isRunning = false;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/regularjs/src/env.js\n ** module id = 11\n ** module chunks = 0\n **/","var _ = require(\"../util\");\n\nvar config = require(\"../config\");\nvar node = require(\"./node\");\nvar Lexer = require(\"./Lexer\");\nvar varName = _.varName;\nvar ctxName = _.ctxName;\nvar extName = _.extName;\nvar isPath = _.makePredicate(\"STRING IDENT NUMBER\");\nvar isKeyWord = _.makePredicate(\"true false undefined null this Array Date JSON Math NaN RegExp decodeURI decodeURIComponent encodeURI encodeURIComponent parseFloat parseInt Object\");\nvar isInvalidTag = _.makePredicate(\"script style\");\n\n\n\nfunction Parser(input, opts){\n  opts = opts || {};\n\n  this.input = input;\n  this.tokens = new Lexer(input, opts).lex();\n  this.pos = 0;\n  this.length = this.tokens.length;\n}\n\n\nvar op = Parser.prototype;\n\n\nop.parse = function(){\n  this.pos = 0;\n  var res= this.program();\n  if(this.ll().type === 'TAG_CLOSE'){\n    this.error(\"You may got a unclosed Tag\")\n  }\n  return res;\n}\n\nop.ll =  function(k){\n  k = k || 1;\n  if(k < 0) k = k + 1;\n  var pos = this.pos + k - 1;\n  if(pos > this.length - 1){\n      return this.tokens[this.length-1];\n  }\n  return this.tokens[pos];\n}\n  // lookahead\nop.la = function(k){\n  return (this.ll(k) || '').type;\n}\n\nop.match = function(type, value){\n  var ll;\n  if(!(ll = this.eat(type, value))){\n    ll  = this.ll();\n    this.error('expect [' + type + (value == null? '':':'+ value) + ']\" -> got \"[' + ll.type + (value==null? '':':'+ll.value) + ']', ll.pos)\n  }else{\n    return ll;\n  }\n}\n\nop.error = function(msg, pos){\n  msg =  \"\\n【 parse failed 】 \" + msg +  ':\\n\\n' + _.trackErrorPos(this.input, typeof pos === 'number'? pos: this.ll().pos||0);\n  throw new Error(msg);\n}\n\nop.next = function(k){\n  k = k || 1;\n  this.pos += k;\n}\nop.eat = function(type, value){\n  var ll = this.ll();\n  if(typeof type !== 'string'){\n    for(var len = type.length ; len--;){\n      if(ll.type === type[len]) {\n        this.next();\n        return ll;\n      }\n    }\n  }else{\n    if( ll.type === type && (typeof value === 'undefined' || ll.value === value) ){\n       this.next();\n       return ll;\n    }\n  }\n  return false;\n}\n\n// program\n//  :EOF\n//  | (statement)* EOF\nop.program = function(){\n  var statements = [],  ll = this.ll();\n  while(ll.type !== 'EOF' && ll.type !=='TAG_CLOSE'){\n\n    statements.push(this.statement());\n    ll = this.ll();\n  }\n  // if(ll.type === 'TAG_CLOSE') this.error(\"You may have unmatched Tag\")\n  return statements;\n}\n\n// statement\n//  : xml\n//  | jst\n//  | text\nop.statement = function(){\n  var ll = this.ll();\n  switch(ll.type){\n    case 'NAME':\n    case 'TEXT':\n      var text = ll.value;\n      this.next();\n      while(ll = this.eat(['NAME', 'TEXT'])){\n        text += ll.value;\n      }\n      return node.text(text);\n    case 'TAG_OPEN':\n      return this.xml();\n    case 'OPEN': \n      return this.directive();\n    case 'EXPR_OPEN':\n      return this.interplation();\n    default:\n      this.error('Unexpected token: '+ this.la())\n  }\n}\n\n// xml \n// stag statement* TAG_CLOSE?(if self-closed tag)\nop.xml = function(){\n  var name, attrs, children, selfClosed;\n  name = this.match('TAG_OPEN').value;\n\n  if( isInvalidTag(name)){\n    this.error('Invalid Tag: ' + name);\n  }\n  attrs = this.attrs();\n  selfClosed = this.eat('/')\n  this.match('>');\n  if( !selfClosed && !_.isVoidTag(name) ){\n    children = this.program();\n    if(!this.eat('TAG_CLOSE', name)) this.error('expect </'+name+'> got'+ 'no matched closeTag')\n  }\n  return node.element(name, attrs, children);\n}\n\n// xentity\n//  -rule(wrap attribute)\n//  -attribute\n//\n// __example__\n//  name = 1 |  \n//  ng-hide |\n//  on-click={{}} | \n//  {{#if name}}on-click={{xx}}{{#else}}on-tap={{}}{{/if}}\n\nop.xentity = function(ll){\n  var name = ll.value, value, modifier;\n  if(ll.type === 'NAME'){\n    //@ only for test\n    if(~name.indexOf('.')){\n      var tmp = name.split('.');\n      name = tmp[0];\n      modifier = tmp[1]\n\n    }\n    if( this.eat(\"=\") ) value = this.attvalue(modifier);\n    return node.attribute( name, value, modifier );\n  }else{\n    if( name !== 'if') this.error(\"current version. ONLY RULE #if #else #elseif is valid in tag, the rule #\" + name + ' is invalid');\n    return this['if'](true);\n  }\n\n}\n\n// stag     ::=    '<' Name (S attr)* S? '>'  \n// attr    ::=     Name Eq attvalue\nop.attrs = function(isAttribute){\n  var eat\n  if(!isAttribute){\n    eat = [\"NAME\", \"OPEN\"]\n  }else{\n    eat = [\"NAME\"]\n  }\n\n  var attrs = [], ll;\n  while (ll = this.eat(eat)){\n    attrs.push(this.xentity( ll ))\n  }\n  return attrs;\n}\n\n// attvalue\n//  : STRING  \n//  | NAME\nop.attvalue = function(mdf){\n  var ll = this.ll();\n  switch(ll.type){\n    case \"NAME\":\n    case \"UNQ\":\n    case \"STRING\":\n      this.next();\n      var value = ll.value;\n      return value;\n    case \"EXPR_OPEN\":\n      return this.interplation();\n    default:\n      this.error('Unexpected token: '+ this.la())\n  }\n}\n\n\n// {{#}}\nop.directive = function(){\n  var name = this.ll().value;\n  this.next();\n  if(typeof this[name] === 'function'){\n    return this[name]()\n  }else{\n    this.error('Undefined directive['+ name +']');\n  }\n}\n\n\n\n\n\n// {{}}\nop.interplation = function(){\n  this.match('EXPR_OPEN');\n  var res = this.expression(true);\n  this.match('END');\n  return res;\n}\n\n// {{~}}\nop.inc = op.include = function(){\n  var content = this.expression();\n  this.match('END');\n  return node.template(content);\n}\n\n// {{#if}}\nop[\"if\"] = function(tag){\n  var test = this.expression();\n  var consequent = [], alternate=[];\n\n  var container = consequent;\n  var statement = !tag? \"statement\" : \"attrs\";\n\n  this.match('END');\n\n  var ll, close;\n  while( ! (close = this.eat('CLOSE')) ){\n    ll = this.ll();\n    if( ll.type === 'OPEN' ){\n      switch( ll.value ){\n        case 'else':\n          container = alternate;\n          this.next();\n          this.match( 'END' );\n          break;\n        case 'elseif':\n          this.next();\n          alternate.push( this[\"if\"](tag) );\n          return node['if']( test, consequent, alternate );\n        default:\n          container.push( this[statement](true) );\n      }\n    }else{\n      container.push(this[statement](true));\n    }\n  }\n  // if statement not matched\n  if(close.value !== \"if\") this.error('Unmatched if directive')\n  return node[\"if\"](test, consequent, alternate);\n}\n\n\n// @mark   mustache syntax have natrure dis, canot with expression\n// {{#list}}\nop.list = function(){\n  // sequence can be a list or hash\n  var sequence = this.expression(), variable, ll, track;\n  var consequent = [], alternate=[];\n  var container = consequent;\n\n  this.match('IDENT', 'as');\n\n  variable = this.match('IDENT').value;\n\n  if(this.eat('IDENT', 'by')){\n    if(this.eat('IDENT',variable + '_index')){\n      track = true;\n    }else{\n      track = this.expression();\n      if(track.constant){\n        // true is means constant, we handle it just like xxx_index.\n        track = true;\n      }\n    }\n  }\n\n  this.match('END');\n\n  while( !(ll = this.eat('CLOSE')) ){\n    if(this.eat('OPEN', 'else')){\n      container =  alternate;\n      this.match('END');\n    }else{\n      container.push(this.statement());\n    }\n  }\n  \n  if(ll.value !== 'list') this.error('expect ' + 'list got ' + '/' + ll.value + ' ', ll.pos );\n  return node.list(sequence, variable, consequent, alternate, track);\n}\n\n\nop.expression = function(){\n  var expression;\n  if(this.eat('@(')){ //once bind\n    expression = this.expr();\n    expression.once = true;\n    this.match(')')\n  }else{\n    expression = this.expr();\n  }\n  return expression;\n}\n\nop.expr = function(){\n  this.depend = [];\n\n  var buffer = this.filter()\n\n  var body = buffer.get || buffer;\n  var setbody = buffer.set;\n  return node.expression(body, setbody, !this.depend.length);\n}\n\n\n// filter\n// assign ('|' filtername[':' args]) * \nop.filter = function(){\n  var left = this.assign();\n  var ll = this.eat('|');\n  var buffer = [], setBuffer, prefix,\n    attr = \"t\", \n    set = left.set, get, \n    tmp = \"\";\n\n  if(ll){\n    if(set) setBuffer = [];\n\n    prefix = \"(function(\" + attr + \"){\";\n\n    do{\n      tmp = attr + \" = \" + ctxName + \"._f_('\" + this.match('IDENT').value+ \"' ).get.call( \"+_.ctxName +\",\" + attr ;\n      if(this.eat(':')){\n        tmp +=\", \"+ this.arguments(\"|\").join(\",\") + \");\"\n      }else{\n        tmp += ');'\n      }\n      buffer.push(tmp);\n      setBuffer && setBuffer.unshift( tmp.replace(\" ).get.call\", \" ).set.call\") );\n\n    }while(ll = this.eat('|'));\n    buffer.push(\"return \" + attr );\n    setBuffer && setBuffer.push(\"return \" + attr);\n\n    get =  prefix + buffer.join(\"\") + \"})(\"+left.get+\")\";\n    // we call back to value.\n    if(setBuffer){\n      // change _ss__(name, _p_) to _s__(name, filterFn(_p_));\n      set = set.replace(_.setName, \n        prefix + setBuffer.join(\"\") + \"})(\"+　_.setName　+\")\" );\n\n    }\n    // the set function is depend on the filter definition. if it have set method, the set will work\n    return this.getset(get, set);\n  }\n  return left;\n}\n\n// assign\n// left-hand-expr = condition\nop.assign = function(){\n  var left = this.condition(), ll;\n  if(ll = this.eat(['=', '+=', '-=', '*=', '/=', '%='])){\n    if(!left.set) this.error('invalid lefthand expression in assignment expression');\n    return this.getset( left.set.replace( \",\" + _.setName, \",\" + this.condition().get ).replace(\"'='\", \"'\"+ll.type+\"'\"), left.set);\n    // return this.getset('(' + left.get + ll.type  + this.condition().get + ')', left.set);\n  }\n  return left;\n}\n\n// or\n// or ? assign : assign\nop.condition = function(){\n\n  var test = this.or();\n  if(this.eat('?')){\n    return this.getset([test.get + \"?\", \n      this.assign().get, \n      this.match(\":\").type, \n      this.assign().get].join(\"\"));\n  }\n\n  return test;\n}\n\n// and\n// and && or\nop.or = function(){\n\n  var left = this.and();\n\n  if(this.eat('||')){\n    return this.getset(left.get + '||' + this.or().get);\n  }\n\n  return left;\n}\n// equal\n// equal && and\nop.and = function(){\n\n  var left = this.equal();\n\n  if(this.eat('&&')){\n    return this.getset(left.get + '&&' + this.and().get);\n  }\n  return left;\n}\n// relation\n// \n// equal == relation\n// equal != relation\n// equal === relation\n// equal !== relation\nop.equal = function(){\n  var left = this.relation(), ll;\n  // @perf;\n  if( ll = this.eat(['==','!=', '===', '!=='])){\n    return this.getset(left.get + ll.type + this.equal().get);\n  }\n  return left\n}\n// relation < additive\n// relation > additive\n// relation <= additive\n// relation >= additive\n// relation in additive\nop.relation = function(){\n  var left = this.additive(), ll;\n  // @perf\n  if(ll = (this.eat(['<', '>', '>=', '<=']) || this.eat('IDENT', 'in') )){\n    return this.getset(left.get + ll.value + this.relation().get);\n  }\n  return left\n}\n// additive :\n// multive\n// additive + multive\n// additive - multive\nop.additive = function(){\n  var left = this.multive() ,ll;\n  if(ll= this.eat(['+','-']) ){\n    return this.getset(left.get + ll.value + this.additive().get);\n  }\n  return left\n}\n// multive :\n// unary\n// multive * unary\n// multive / unary\n// multive % unary\nop.multive = function(){\n  var left = this.range() ,ll;\n  if( ll = this.eat(['*', '/' ,'%']) ){\n    return this.getset(left.get + ll.type + this.multive().get);\n  }\n  return left;\n}\n\nop.range = function(){\n  var left = this.unary(), ll, right;\n\n  if(ll = this.eat('..')){\n    right = this.unary();\n    var body = \n      \"(function(start,end){var res = [],step=end>start?1:-1; for(var i = start; end>start?i <= end: i>=end; i=i+step){res.push(i); } return res })(\"+left.get+\",\"+right.get+\")\"\n    return this.getset(body);\n  }\n\n  return left;\n}\n\n\n\n// lefthand\n// + unary\n// - unary\n// ~ unary\n// ! unary\nop.unary = function(){\n  var ll;\n  if(ll = this.eat(['+','-','~', '!'])){\n    return this.getset('(' + ll.type + this.unary().get + ')') ;\n  }else{\n    return this.member()\n  }\n}\n\n// call[lefthand] :\n// member args\n// member [ expression ]\n// member . ident  \n\nop.member = function(base, last, pathes, prevBase){\n  var ll, path, extValue;\n\n\n  var onlySimpleAccessor = false;\n  if(!base){ //first\n    path = this.primary();\n    var type = typeof path;\n    if(type === 'string'){ \n      pathes = [];\n      pathes.push( path );\n      last = path;\n      extValue = extName + \".\" + path\n      base = ctxName + \"._sg_('\" + path + \"', \" + varName + \", \" + extName + \")\";\n      onlySimpleAccessor = true;\n    }else{ //Primative Type\n      if(path.get === 'this'){\n        base = ctxName;\n        pathes = ['this'];\n      }else{\n        pathes = null;\n        base = path.get;\n      }\n    }\n  }else{ // not first enter\n    if(typeof last === 'string' && isPath( last) ){ // is valid path\n      pathes.push(last);\n    }else{\n      if(pathes && pathes.length) this.depend.push(pathes);\n      pathes = null;\n    }\n  }\n  if(ll = this.eat(['[', '.', '('])){\n    switch(ll.type){\n      case '.':\n          // member(object, property, computed)\n        var tmpName = this.match('IDENT').value;\n        prevBase = base;\n        if( this.la() !== \"(\" ){ \n          base = ctxName + \"._sg_('\" + tmpName + \"', \" + base + \")\";\n        }else{\n          base += \"['\" + tmpName + \"']\";\n        }\n        return this.member( base, tmpName, pathes,  prevBase);\n      case '[':\n          // member(object, property, computed)\n        path = this.assign();\n        prevBase = base;\n        if( this.la() !== \"(\" ){ \n        // means function call, we need throw undefined error when call function\n        // and confirm that the function call wont lose its context\n          base = ctxName + \"._sg_(\" + path.get + \", \" + base + \")\";\n        }else{\n          base += \"[\" + path.get + \"]\";\n        }\n        this.match(']')\n        return this.member(base, path, pathes, prevBase);\n      case '(':\n        // call(callee, args)\n        var args = this.arguments().join(',');\n        base =  base+\"(\" + args +\")\";\n        this.match(')')\n        return this.member(base, null, pathes);\n    }\n  }\n  if( pathes && pathes.length ) this.depend.push( pathes );\n  var res =  {get: base};\n  if(last){\n    res.set = ctxName + \"._ss_(\" + \n        (last.get? last.get : \"'\"+ last + \"'\") + \n        \",\"+ _.setName + \",\"+ \n        (prevBase?prevBase:_.varName) + \n        \", '=', \"+ ( onlySimpleAccessor? 1 : 0 ) + \")\";\n  \n  }\n  return res;\n}\n\n/**\n * \n */\nop.arguments = function(end){\n  end = end || ')'\n  var args = [];\n  do{\n    if(this.la() !== end){\n      args.push(this.assign().get)\n    }\n  }while( this.eat(','));\n  return args\n}\n\n\n// primary :\n// this \n// ident\n// literal\n// array\n// object\n// ( expression )\n\nop.primary = function(){\n  var ll = this.ll();\n  switch(ll.type){\n    case \"{\":\n      return this.object();\n    case \"[\":\n      return this.array();\n    case \"(\":\n      return this.paren();\n    // literal or ident\n    case 'STRING':\n      this.next();\n      return this.getset(\"'\" + ll.value + \"'\")\n    case 'NUMBER':\n      this.next();\n      return this.getset(\"\"+ll.value);\n    case \"IDENT\":\n      this.next();\n      if(isKeyWord(ll.value)){\n        return this.getset( ll.value );\n      }\n      return ll.value;\n    default: \n      this.error('Unexpected Token: ' + ll.type);\n  }\n}\n\n// object\n//  {propAssign [, propAssign] * [,]}\n\n// propAssign\n//  prop : assign\n\n// prop\n//  STRING\n//  IDENT\n//  NUMBER\n\nop.object = function(){\n  var code = [this.match('{').type];\n\n  var ll = this.eat( ['STRING', 'IDENT', 'NUMBER'] );\n  while(ll){\n    code.push(\"'\" + ll.value + \"'\" + this.match(':').type);\n    var get = this.assign().get;\n    code.push(get);\n    ll = null;\n    if(this.eat(\",\") && (ll = this.eat(['STRING', 'IDENT', 'NUMBER'])) ) code.push(\",\");\n  }\n  code.push(this.match('}').type);\n  return {get: code.join(\"\")}\n}\n\n// array\n// [ assign[,assign]*]\nop.array = function(){\n  var code = [this.match('[').type], item;\n  if( this.eat(\"]\") ){\n\n     code.push(\"]\");\n  } else {\n    while(item = this.assign()){\n      code.push(item.get);\n      if(this.eat(',')) code.push(\",\");\n      else break;\n    }\n    code.push(this.match(']').type);\n  }\n  return {get: code.join(\"\")};\n}\n\n// '(' expression ')'\nop.paren = function(){\n  this.match('(');\n  var res = this.filter()\n  res.get = '(' + res.get + ')';\n  this.match(')');\n  return res;\n}\n\nop.getset = function(get, set){\n  return {\n    get: get,\n    set: set\n  }\n}\n\n\n\nmodule.exports = Parser;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/regularjs/src/parser/Parser.js\n ** module id = 12\n ** module chunks = 0\n **/","module.exports = {\n  element: function(name, attrs, children){\n    return {\n      type: 'element',\n      tag: name,\n      attrs: attrs,\n      children: children\n    }\n  },\n  attribute: function(name, value, mdf){\n    return {\n      type: 'attribute',\n      name: name,\n      value: value,\n      mdf: mdf\n    }\n  },\n  \"if\": function(test, consequent, alternate){\n    return {\n      type: 'if',\n      test: test,\n      consequent: consequent,\n      alternate: alternate\n    }\n  },\n  list: function(sequence, variable, body, alternate, track){\n    return {\n      type: 'list',\n      sequence: sequence,\n      alternate: alternate,\n      variable: variable,\n      body: body,\n      track: track\n    }\n  },\n  expression: function( body, setbody, constant ){\n    return {\n      type: \"expression\",\n      body: body,\n      constant: constant || false,\n      setbody: setbody || false\n    }\n  },\n  text: function(text){\n    return {\n      type: \"text\",\n      text: text\n    }\n  },\n  template: function(template){\n    return {\n      type: 'template',\n      content: template\n    }\n  }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/regularjs/src/parser/node.js\n ** module id = 13\n ** module chunks = 0\n **/","var _ = require(\"../util\");\nvar config = require(\"../config\");\n\n// some custom tag  will conflict with the Lexer progress\nvar conflictTag = {\"}\": \"{\", \"]\": \"[\"}, map1, map2;\n// some macro for lexer\nvar macro = {\n  'NAME': /(?:[:_A-Za-z][-\\.:_0-9A-Za-z]*)/,\n  'IDENT': /[\\$_A-Za-z][_0-9A-Za-z\\$]*/,\n  'SPACE': /[\\r\\n\\t\\f ]/\n}\n\n\nvar test = /a|(b)/.exec(\"a\");\nvar testSubCapure = test && test[1] === undefined? \n  function(str){ return str !== undefined }\n  :function(str){return !!str};\n\nfunction wrapHander(handler){\n  return function(all){\n    return {type: handler, value: all }\n  }\n}\n\nfunction Lexer(input, opts){\n  if(conflictTag[config.END]){\n    this.markStart = conflictTag[config.END];\n    this.markEnd = config.END;\n  }\n\n  this.input = (input||\"\").trim();\n  this.opts = opts || {};\n  this.map = this.opts.mode !== 2?  map1: map2;\n  this.states = [\"INIT\"];\n  if(opts && opts.expression){\n     this.states.push(\"JST\");\n     this.expression = true;\n  }\n}\n\nvar lo = Lexer.prototype\n\n\nlo.lex = function(str){\n  str = (str || this.input).trim();\n  var tokens = [], split, test,mlen, token, state;\n  this.input = str, \n  this.marks = 0;\n  // init the pos index\n  this.index=0;\n  var i = 0;\n  while(str){\n    i++\n    state = this.state();\n    split = this.map[state] \n    test = split.TRUNK.exec(str);\n    if(!test){\n      this.error('Unrecoginized Token');\n    }\n    mlen = test[0].length;\n    str = str.slice(mlen)\n    token = this._process.call(this, test, split, str)\n    if(token) tokens.push(token)\n    this.index += mlen;\n    // if(state == 'TAG' || state == 'JST') str = this.skipspace(str);\n  }\n\n  tokens.push({type: 'EOF'});\n\n  return tokens;\n}\n\nlo.error = function(msg){\n  throw  Error(\"Parse Error: \" + msg +  ':\\n' + _.trackErrorPos(this.input, this.index));\n}\n\nlo._process = function(args, split,str){\n  // console.log(args.join(\",\"), this.state())\n  var links = split.links, marched = false, token;\n\n  for(var len = links.length, i=0;i<len ;i++){\n    var link = links[i],\n      handler = link[2],\n      index = link[0];\n    // if(args[6] === '>' && index === 6) console.log('haha')\n    if(testSubCapure(args[index])) {\n      marched = true;\n      if(handler){\n        token = handler.apply(this, args.slice(index, index + link[1]))\n        if(token)  token.pos = this.index;\n      }\n      break;\n    }\n  }\n  if(!marched){ // in ie lt8 . sub capture is \"\" but ont \n    switch(str.charAt(0)){\n      case \"<\":\n        this.enter(\"TAG\");\n        break;\n      default:\n        this.enter(\"JST\");\n        break;\n    }\n  }\n  return token;\n}\nlo.enter = function(state){\n  this.states.push(state)\n  return this;\n}\n\nlo.state = function(){\n  var states = this.states;\n  return states[states.length-1];\n}\n\nlo.leave = function(state){\n  var states = this.states;\n  if(!state || states[states.length-1] === state) states.pop()\n}\n\n\nLexer.setup = function(){\n  macro.END = config.END;\n  macro.BEGIN = config.BEGIN;\n  \n  // living template lexer\n  map1 = genMap([\n    // INIT\n    rules.ENTER_JST,\n    rules.ENTER_TAG,\n    rules.TEXT,\n\n    //TAG\n    rules.TAG_NAME,\n    rules.TAG_OPEN,\n    rules.TAG_CLOSE,\n    rules.TAG_PUNCHOR,\n    rules.TAG_ENTER_JST,\n    rules.TAG_UNQ_VALUE,\n    rules.TAG_STRING,\n    rules.TAG_SPACE,\n    rules.TAG_COMMENT,\n\n    // JST\n    rules.JST_OPEN,\n    rules.JST_CLOSE,\n    rules.JST_COMMENT,\n    rules.JST_EXPR_OPEN,\n    rules.JST_IDENT,\n    rules.JST_SPACE,\n    rules.JST_LEAVE,\n    rules.JST_NUMBER,\n    rules.JST_PUNCHOR,\n    rules.JST_STRING,\n    rules.JST_COMMENT\n    ])\n\n  // ignored the tag-relative token\n  map2 = genMap([\n    // INIT no < restrict\n    rules.ENTER_JST2,\n    rules.TEXT,\n    // JST\n    rules.JST_COMMENT,\n    rules.JST_OPEN,\n    rules.JST_CLOSE,\n    rules.JST_EXPR_OPEN,\n    rules.JST_IDENT,\n    rules.JST_SPACE,\n    rules.JST_LEAVE,\n    rules.JST_NUMBER,\n    rules.JST_PUNCHOR,\n    rules.JST_STRING,\n    rules.JST_COMMENT\n    ])\n}\n\n\nfunction genMap(rules){\n  var rule, map = {}, sign;\n  for(var i = 0, len = rules.length; i < len ; i++){\n    rule = rules[i];\n    sign = rule[2] || 'INIT';\n    ( map[sign] || (map[sign] = {rules:[], links:[]}) ).rules.push(rule);\n  }\n  return setup(map);\n}\n\nfunction setup(map){\n  var split, rules, trunks, handler, reg, retain, rule;\n  function replaceFn(all, one){\n    return typeof macro[one] === 'string'? \n      _.escapeRegExp(macro[one]) \n      : String(macro[one]).slice(1,-1);\n  }\n\n  for(var i in map){\n\n    split = map[i];\n    split.curIndex = 1;\n    rules = split.rules;\n    trunks = [];\n\n    for(var j = 0,len = rules.length; j<len; j++){\n      rule = rules[j]; \n      reg = rule[0];\n      handler = rule[1];\n\n      if(typeof handler === 'string'){\n        handler = wrapHander(handler);\n      }\n      if(_.typeOf(reg) === 'regexp') reg = reg.toString().slice(1, -1);\n\n      reg = reg.replace(/\\{(\\w+)\\}/g, replaceFn)\n      retain = _.findSubCapture(reg) + 1; \n      split.links.push([split.curIndex, retain, handler]); \n      split.curIndex += retain;\n      trunks.push(reg);\n    }\n    split.TRUNK = new RegExp(\"^(?:(\" + trunks.join(\")|(\") + \"))\")\n  }\n  return map;\n}\n\nvar rules = {\n\n  // 1. INIT\n  // ---------------\n\n  // mode1's JST ENTER RULE\n  ENTER_JST: [/[^\\x00<]*?(?={BEGIN})/, function(all){\n    this.enter('JST');\n    if(all) return {type: 'TEXT', value: all}\n  }],\n\n  // mode2's JST ENTER RULE\n  ENTER_JST2: [/[^\\x00]*?(?={BEGIN})/, function(all){\n    this.enter('JST');\n    if(all) return {type: 'TEXT', value: all}\n  }],\n\n  ENTER_TAG: [/[^\\x00]*?(?=<[\\w\\/\\!])/, function(all){ \n    this.enter('TAG');\n    if(all) return {type: 'TEXT', value: all}\n  }],\n\n  TEXT: [/[^\\x00]+/, 'TEXT' ],\n\n  // 2. TAG\n  // --------------------\n  TAG_NAME: [/{NAME}/, 'NAME', 'TAG'],\n  TAG_UNQ_VALUE: [/[^\\{}&\"'=><`\\r\\n\\f\\t ]+/, 'UNQ', 'TAG'],\n\n  TAG_OPEN: [/<({NAME})\\s*/, function(all, one){ //\"\n    return {type: 'TAG_OPEN', value: one}\n  }, 'TAG'],\n  TAG_CLOSE: [/<\\/({NAME})[\\r\\n\\f\\t ]*>/, function(all, one){\n    this.leave();\n    return {type: 'TAG_CLOSE', value: one }\n  }, 'TAG'],\n\n    // mode2's JST ENTER RULE\n  TAG_ENTER_JST: [/(?={BEGIN})/, function(){\n    this.enter('JST');\n  }, 'TAG'],\n\n\n  TAG_PUNCHOR: [/[\\>\\/=&]/, function(all){\n    if(all === '>') this.leave();\n    return {type: all, value: all }\n  }, 'TAG'],\n  TAG_STRING:  [ /'([^']*)'|\"([^\"]*)\\\"/, /*'*/  function(all, one, two){ \n    var value = one || two || \"\";\n\n    return {type: 'STRING', value: value}\n  }, 'TAG'],\n\n  TAG_SPACE: [/{SPACE}+/, null, 'TAG'],\n  TAG_COMMENT: [/<\\!--([^\\x00]*?)--\\>/, function(all){\n    this.leave()\n    // this.leave('TAG')\n  } ,'TAG'],\n\n  // 3. JST\n  // -------------------\n\n  JST_OPEN: ['{BEGIN}#{SPACE}*({IDENT})', function(all, name){\n    return {\n      type: 'OPEN',\n      value: name\n    }\n  }, 'JST'],\n  JST_LEAVE: [/{END}/, function(all){\n    if(this.markEnd === all && this.expression) return {type: this.markEnd, value: this.markEnd};\n    if(!this.markEnd || !this.marks ){\n      this.firstEnterStart = false;\n      this.leave('JST');\n      return {type: 'END'}\n    }else{\n      this.marks--;\n      return {type: this.markEnd, value: this.markEnd}\n    }\n  }, 'JST'],\n  JST_CLOSE: [/{BEGIN}\\s*\\/({IDENT})\\s*{END}/, function(all, one){\n    this.leave('JST');\n    return {\n      type: 'CLOSE',\n      value: one\n    }\n  }, 'JST'],\n  JST_COMMENT: [/{BEGIN}\\!([^\\x00]*?)\\!{END}/, function(){\n    this.leave();\n  }, 'JST'],\n  JST_EXPR_OPEN: ['{BEGIN}',function(all, one){\n    if(all === this.markStart){\n      if(this.expression) return { type: this.markStart, value: this.markStart };\n      if(this.firstEnterStart || this.marks){\n        this.marks++\n        this.firstEnterStart = false;\n        return { type: this.markStart, value: this.markStart };\n      }else{\n        this.firstEnterStart = true;\n      }\n    }\n    return {\n      type: 'EXPR_OPEN',\n      escape: false\n    }\n\n  }, 'JST'],\n  JST_IDENT: ['{IDENT}', 'IDENT', 'JST'],\n  JST_SPACE: [/[ \\r\\n\\f]+/, null, 'JST'],\n  JST_PUNCHOR: [/[=!]?==|[-=><+*\\/%\\!]?\\=|\\|\\||&&|\\@\\(|\\.\\.|[<\\>\\[\\]\\(\\)\\-\\|\\{}\\+\\*\\/%?:\\.!,]/, function(all){\n    return { type: all, value: all }\n  },'JST'],\n\n  JST_STRING:  [ /'([^']*)'|\"([^\"]*)\"/, function(all, one, two){ //\"'\n    return {type: 'STRING', value: one || two || \"\"}\n  }, 'JST'],\n  JST_NUMBER: [/(?:[0-9]*\\.[0-9]+|[0-9]+)(e\\d+)?/, function(all){\n    return {type: 'NUMBER', value: parseFloat(all, 10)};\n  }, 'JST']\n}\n\n\n// setup when first config\nLexer.setup();\n\n\n\nmodule.exports = Lexer;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/regularjs/src/parser/Lexer.js\n ** module id = 14\n ** module chunks = 0\n **/","var _ = require('../util');\n\nfunction simpleDiff(now, old){\n  var nlen = now.length;\n  var olen = old.length;\n  if(nlen !== olen){\n    return true;\n  }\n  for(var i = 0; i < nlen ; i++){\n    if(now[i] !== old[i]) return  true;\n  }\n  return false\n\n}\n\nfunction equals(a,b){\n  return a === b;\n}\n\n// array1 - old array\n// array2 - new array\nfunction ld(array1, array2, equalFn){\n  var n = array1.length;\n  var m = array2.length;\n  var equalFn = equalFn || equals;\n  var matrix = [];\n  for(var i = 0; i <= n; i++){\n    matrix.push([i]);\n  }\n  for(var j=1;j<=m;j++){\n    matrix[0][j]=j;\n  }\n  for(var i = 1; i <= n; i++){\n    for(var j = 1; j <= m; j++){\n      if(equalFn(array1[i-1], array2[j-1])){\n        matrix[i][j] = matrix[i-1][j-1];\n      }else{\n        matrix[i][j] = Math.min(\n          matrix[i-1][j]+1, //delete\n          matrix[i][j-1]+1//add\n          )\n      }\n    }\n  }\n  return matrix;\n}\n// arr2 - new array\n// arr1 - old array\nfunction diffArray(arr2, arr1, diff, diffFn) {\n  if(!diff) return simpleDiff(arr2, arr1);\n  var matrix = ld(arr1, arr2, diffFn)\n  var n = arr1.length;\n  var i = n;\n  var m = arr2.length;\n  var j = m;\n  var edits = [];\n  var current = matrix[i][j];\n  while(i>0 || j>0){\n  // the last line\n    if (i === 0) {\n      edits.unshift(3);\n      j--;\n      continue;\n    }\n    // the last col\n    if (j === 0) {\n      edits.unshift(2);\n      i--;\n      continue;\n    }\n    var northWest = matrix[i - 1][j - 1];\n    var west = matrix[i - 1][j];\n    var north = matrix[i][j - 1];\n\n    var min = Math.min(north, west, northWest);\n\n    if (min === west) {\n      edits.unshift(2); //delete\n      i--;\n      current = west;\n    } else if (min === northWest ) {\n      if (northWest === current) {\n        edits.unshift(0); //no change\n      } else {\n        edits.unshift(1); //update\n        current = northWest;\n      }\n      i--;\n      j--;\n    } else {\n      edits.unshift(3); //add\n      j--;\n      current = north;\n    }\n  }\n  var LEAVE = 0;\n  var ADD = 3;\n  var DELELE = 2;\n  var UPDATE = 1;\n  var n = 0;m=0;\n  var steps = [];\n  var step = {index: null, add:0, removed:[]};\n\n  for(var i=0;i<edits.length;i++){\n    if(edits[i] > 0 ){ // NOT LEAVE\n      if(step.index === null){\n        step.index = m;\n      }\n    } else { //LEAVE\n      if(step.index != null){\n        steps.push(step)\n        step = {index: null, add:0, removed:[]};\n      }\n    }\n    switch(edits[i]){\n      case LEAVE:\n        n++;\n        m++;\n        break;\n      case ADD:\n        step.add++;\n        m++;\n        break;\n      case DELELE:\n        step.removed.push(arr1[n])\n        n++;\n        break;\n      case UPDATE:\n        step.add++;\n        step.removed.push(arr1[n])\n        n++;\n        m++;\n        break;\n    }\n  }\n  if(step.index != null){\n    steps.push(step)\n  }\n  return steps\n}\n\n\n\n// diffObject\n// ----\n// test if obj1 deepEqual obj2\nfunction diffObject( now, last, diff ){\n\n\n  if(!diff){\n\n    for( var j in now ){\n      if( last[j] !== now[j] ) return true\n    }\n\n    for( var n in last ){\n      if(last[n] !== now[n]) return true;\n    }\n\n  }else{\n\n    var nKeys = _.keys(now);\n    var lKeys = _.keys(last);\n\n    /**\n     * [description]\n     * @param  {[type]} a    [description]\n     * @param  {[type]} b){                   return now[b] [description]\n     * @return {[type]}      [description]\n     */\n    return diffArray(nKeys, lKeys, diff, function(a, b){\n      return now[b] === last[a];\n    });\n\n  }\n\n  return false;\n\n\n}\n\nmodule.exports = {\n  diffArray: diffArray,\n  diffObject: diffObject\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/regularjs/src/helper/diff.js\n ** module id = 15\n ** module chunks = 0\n **/","var _ = require('../util');\nvar config = require('../config');\nvar parse = require('../helper/parse');\nvar node = require('../parser/node');\n\n\nfunction initDefinition(context, definition, beforeConfig){\n\n  var eventConfig, hasInstanceComputed = !!definition.computed, template;\n  var usePrototyeString = typeof context.template === 'string' && !definition.template;\n\n  if(definition.events || context.events){\n    eventConfig = _.extend(definition.events || {}, context.events);\n    if(definition.events) delete definition.events;\n  }\n\n\n  definition.data = definition.data || {};\n  definition.computed = definition.computed || {};\n  if(context.data) _.extend(definition.data, context.data);\n  if(context.computed) _.extend(definition.computed, context.computed);\n\n  var usePrototyeString = typeof context.template === 'string' && !definition.template;\n\n  _.extend(context, definition, true);\n\n  if ( eventConfig ) {\n    context.$on( eventConfig );\n  }\n\n  // we need add some logic at client.\n  beforeConfig && beforeConfig();\n\n  // only have instance computed, we need prepare the property\n  if( hasInstanceComputed ) context.computed = handleComputed(context.computed);\n\n  context.$emit( \"$config\", context.data );\n  context.config && context.config( context.data );\n  context.$emit( \"$afterConfig\", context.data );\n\n  template = context.template;\n\n \n  if(typeof template === 'string') {\n    template = parse.parse(template);\n    if(usePrototyeString) {\n    // avoid multiply compile\n      context.constructor.prototype.template = template;\n    }else{\n      delete context.template;\n    }\n  }\n  return template;\n}\n\nvar handleComputed = (function(){\n  // wrap the computed getter;\n  function wrapGet(get){\n    return function(context){\n      return get.call(context, context.data );\n    }\n  }\n  // wrap the computed setter;\n  function wrapSet(set){\n    return function(context, value){\n      set.call( context, value, context.data );\n      return value;\n    }\n  }\n\n  return function( computed ){\n    if(!computed) return;\n    var parsedComputed = {}, handle, pair, type;\n    for(var i in computed){\n      handle = computed[i]\n      type = typeof handle;\n\n      if(handle.type === 'expression'){\n        parsedComputed[i] = handle;\n        continue;\n      }\n      if( type === \"string\" ){\n        parsedComputed[i] = parse.expression(handle)\n      }else{\n        pair = parsedComputed[i] = {type: 'expression'};\n        if(type === \"function\" ){\n          pair.get = wrapGet(handle);\n        }else{\n          if(handle.get) pair.get = wrapGet(handle.get);\n          if(handle.set) pair.set = wrapSet(handle.set);\n        }\n      } \n    }\n    return parsedComputed;\n  }\n})();\n\n\nfunction prepareAttr ( ast ,directive){\n  if(ast.parsed ) return ast;\n  var value = ast.value;\n  var name=  ast.name, body, constant;\n  if(typeof value === 'string' && ~value.indexOf(config.BEGIN) && ~value.indexOf(config.END) ){\n    if( !directive || !directive.nps ) {\n      var parsed = parse.parse(value, { mode: 2 });\n      if(parsed.length === 1 && parsed[0].type === 'expression'){ \n        body = parsed[0];\n      } else{\n        constant = true;\n        body = [];\n        parsed.forEach(function(item){\n          if(!item.constant) constant=false;\n          // silent the mutiple inteplation\n            body.push(item.body || \"'\" + item.text.replace(/'/g, \"\\\\'\") + \"'\");        \n        });\n        body = node.expression(\"[\" + body.join(\",\") + \"].join('')\", null, constant);\n      }\n      ast.value = body;\n    }\n  }\n  ast.parsed = true;\n  return ast;\n}\n\nmodule.exports = {\n  // share logic between server and client\n  initDefinition: initDefinition,\n  handleComputed: handleComputed,\n  prepareAttr: prepareAttr\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/regularjs/src/render/shared.js\n ** module id = 16\n ** module chunks = 0\n **/","\nvar _ = require(\"../util.js\");\nvar Base = require('./base.js');\n\nfunction ServerManager( options ){\n  if(this instanceof ServerManager === false){ return new ServerManager(options); }\n  Base.apply( this, arguments );\n}\n\nvar o =_.inherit( ServerManager, Base.prototype );\n\n_.extend(o , {\n  exec: function ( path ){\n    var found = this.decode(path);\n    if( !found ) return;\n    var param = found.param;\n\n    //@FIXIT: We NEED decodeURIComponent in server side!!\n\n    for(var i in param){\n      if(typeof param[i] === 'string') param[i] = decodeURIComponent(param[i]);\n    }\n    var states = [];\n    var state = found.state;\n    this.current = state;\n\n    while(state && !state.root){\n      states.unshift( state );\n      state = state.parent;\n    }\n\n    return {\n      states: states,\n      param: param\n    }\n  }\n})\n\n\nmodule.exports = ServerManager\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/stateman/src/manager/server.js\n ** module id = 17\n ** module chunks = 0\n **/","var _ = module.exports = {};\nvar slice = [].slice, o2str = ({}).toString;\n\n// merge o2's properties to Object o1. \n_.extend = function(o1, o2, override){\n  for(var i in o2) if(override || o1[i] === undefined){\n    o1[i] = o2[i];\n  }\n  return o1;\n};\n\n_.values = function( o){\n  var keys = [];\n  for(var i in o) if( o.hasOwnProperty(i) ){\n    keys.push( o[i] );\n  }\n  return keys;\n};\n\n_.inherit = function( cstor, o ){\n  function Faker(){}\n  Faker.prototype = o;\n  cstor.prototype = new Faker();\n  cstor.prototype.constructor = cstor;\n  return o;\n}\n\n_.slice = function(arr, index){\n  return slice.call(arr, index);\n};\n\n_.typeOf = function typeOf (o) {\n  return o == null ? String(o) : o2str.call(o).slice(8, -1).toLowerCase();\n};\n\n//strict eql\n_.eql = function(o1, o2){\n  var t1 = _.typeOf(o1), t2 = _.typeOf(o2);\n  if( t1 !== t2) return false;\n  if(t1 === 'object'){\n    // only check the first's properties\n    for(var i in o1){\n      // Immediately return if a mismatch is found.\n      if( o1[i] !== o2[i] ) return false;\n    }\n    return true;\n  }\n  return o1 === o2;\n};\n\n// small emitter \n_.emitable = (function(){\n  function norm(ev){\n    var eventAndNamespace = (ev||'').split(':');\n    return {event: eventAndNamespace[0], namespace: eventAndNamespace[1]};\n  }\n  var API = {\n    once: function(event, fn){\n      var callback = function(){\n        fn.apply(this, arguments);\n        this.off(event, callback);\n      };\n      return this.on(event, callback);\n    },\n    on: function(event, fn) {\n      if(typeof event === 'object'){\n        for (var i in event) {\n          this.on(i, event[i]);\n        }\n        return this;\n      }\n      var ne = norm(event);\n      event=ne.event;\n      if(event && typeof fn === 'function' ){\n        var handles = this._handles || (this._handles = {}),\n          calls = handles[event] || (handles[event] = []);\n        fn._ns = ne.namespace;\n        calls.push(fn);\n      }\n      return this;\n    },\n    off: function(event, fn) {\n      var ne = norm(event); event = ne.event;\n      if(!event || !this._handles) this._handles = {};\n\n      var handles = this._handles;\n      var calls = handles[event];\n\n      if (calls) {\n        if (!fn && !ne.namespace) {\n          handles[event] = [];\n        }else{\n          for (var i = 0, len = calls.length; i < len; i++) {\n            if ( (!fn || fn === calls[i]) && (!ne.namespace || calls[i]._ns === ne.namespace) ) {\n              calls.splice(i, 1);\n              return this;\n            }\n          }\n        }\n      }\n\n      return this;\n    },\n    emit: function(event){\n      var ne = norm(event); event = ne.event;\n\n      var args = _.slice(arguments, 1),\n        handles = this._handles, calls;\n\n      if (!handles || !(calls = handles[event])) return this;\n      for (var i = 0, len = calls.length; i < len; i++) {\n        var fn = calls[i];\n        if( !ne.namespace || fn._ns === ne.namespace ) fn.apply(this, args);\n      }\n      return this;\n    }\n  };\n  return function(obj){\n      obj = typeof obj == \"function\" ? obj.prototype : obj;\n      return _.extend(obj, API);\n  };\n})();\n\n_.bind = function(fn, context){\n  return function(){\n    return fn.apply(context, arguments);\n  };\n};\n\nvar rDbSlash = /\\/+/g, // double slash\n  rEndSlash = /\\/$/;    // end slash\n\n_.cleanPath = function (path){\n  return (\"/\" + path).replace( rDbSlash,\"/\" ).replace( rEndSlash, \"\" ) || \"/\";\n};\n\n// normalize the path\nfunction normalizePath(path) {\n  // means is from \n  // (?:\\:([\\w-]+))?(?:\\(([^\\/]+?)\\))|(\\*{2,})|(\\*(?!\\*)))/g\n  var preIndex = 0;\n  var keys = [];\n  var index = 0;\n  var matches = \"\";\n\n  path = _.cleanPath(path);\n\n  var regStr = path\n    //  :id(capture)? | (capture)   |  ** | * \n    .replace(/\\:([\\w-]+)(?:\\(([^\\/]+?)\\))?|(?:\\(([^\\/]+)\\))|(\\*{2,})|(\\*(?!\\*))/g, \n      function(all, key, keyformat, capture, mwild, swild, startAt) {\n        // move the uncaptured fragment in the path\n        if(startAt > preIndex) matches += path.slice(preIndex, startAt);\n        preIndex = startAt + all.length;\n        if( key ){\n          matches += \"(\" + key + \")\";\n          keys.push(key);\n          return \"(\"+( keyformat || \"[\\\\w-]+\")+\")\";\n        }\n        matches += \"(\" + index + \")\";\n\n        keys.push( index++ );\n\n        if( capture ){\n           // sub capture detect\n          return \"(\" + capture +  \")\";\n        } \n        if(mwild) return \"(.*)\";\n        if(swild) return \"([^\\\\/]*)\";\n    });\n\n  if(preIndex !== path.length) matches += path.slice(preIndex);\n\n  return {\n    regexp: new RegExp(\"^\" + regStr +\"/?$\"),\n    keys: keys,\n    matches: matches || path\n  };\n}\n\n_.log = function(msg, type){\n  typeof console !== \"undefined\" && console[type || \"log\"](msg); //eslint-disable-line no-console\n};\n\n_.isPromise = function( obj ){\n\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n\n};\n\n_.normalize = normalizePath;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/stateman/src/util.js\n ** module id = 18\n ** module chunks = 0\n **/","\nvar State = require(\"../state.js\"),\n  _ = require(\"../util.js\"),\n  stateFn = State.prototype.state;\n\nfunction BaseMan( options ){\n\n  options = options || {};\n\n  this._states = {};\n\n  this.strict = options.strict;\n  this.title = options.title;\n\n  if(options.routes) this.state(options.routes);\n\n}\n\n_.extend( _.emitable( BaseMan ), {\n    // keep blank\n    name: '',\n\n    root: true,\n\n\n    state: function(stateName){\n\n      var active = this.active;\n      var args = _.slice(arguments, 1);\n\n      if(typeof stateName === \"string\" && active){\n         stateName = stateName.replace(\"~\", active.name);\n         if(active.parent) stateName = stateName.replace(\"^\", active.parent.name || \"\");\n      }\n      // ^ represent current.parent\n      // ~ represent  current\n      // only \n      args.unshift(stateName);\n      return stateFn.apply(this, args);\n\n    },\n\n    decode: function(path, needLocation){\n\n      var pathAndQuery = path.split(\"?\");\n      var query = this._findQuery(pathAndQuery[1]);\n      path = pathAndQuery[0];\n      var found = this._findState(this, path);\n      if(found) _.extend(found.param, query);\n      return found;\n\n    },\n    encode: function(stateName, param, needLink){\n      var state = this.state(stateName);\n      var history = this.history;\n      if(!state) return;\n      var url  = state.encode(param);\n      \n      return needLink? (history.mode!==2? history.prefix + url : url ): url;\n    },\n    // notify specify state\n    // check the active statename whether to match the passed condition (stateName and param)\n    is: function(stateName, param, isStrict){\n      if(!stateName) return false;\n      stateName = (stateName.name || stateName);\n      var current = this.current, currentName = current.name;\n      var matchPath = isStrict? currentName === stateName : (currentName + \".\").indexOf(stateName + \".\")===0;\n      return matchPath && (!param || _.eql(param, this.param)); \n    },\n\n\n    _wrapPromise: function( promise, next ){\n\n      return promise.then( next, function(){ next(false); }) ;\n\n    },\n\n    _findQuery: function(querystr){\n\n      var queries = querystr && querystr.split(\"&\"), query= {};\n      if(queries){\n        var len = queries.length;\n        for(var i =0; i< len; i++){\n          var tmp = queries[i].split(\"=\");\n          query[tmp[0]] = tmp[1];\n        }\n      }\n      return query;\n\n    },\n    _findState: function(state, path){\n      var states = state._states, found, param;\n\n      // leaf-state has the high priority upon branch-state\n      if(state.hasNext){\n\n        var stateList = _.values( states ).sort( this._sortState );\n        var len = stateList.length;\n\n        for(var i = 0; i < len; i++){\n\n          found = this._findState( stateList[i], path );\n          if( found ) return found;\n        }\n\n      }\n      // in strict mode only leaf can be touched\n      // if all children is don. will try it self\n      param = state.regexp && state.decode(path);\n      if(param){\n        return {\n          state: state,\n          param: param\n        }\n      }else{\n        return false;\n      }\n    },\n    _sortState: function( a, b ){\n      return ( b.priority || 0 ) - ( a.priority || 0 );\n    },\n    // find the same branch;\n    _findBase: function(now, before){\n\n      if(!now || !before || now == this || before == this) return this;\n      var np = now, bp = before, tmp;\n      while(np && bp){\n        tmp = bp;\n        while(tmp){\n          if(np === tmp) return tmp;\n          tmp = tmp.parent;\n        }\n        np = np.parent;\n      }\n    },\n\n}, true);\n\nmodule.exports = BaseMan;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/stateman/src/manager/base.js\n ** module id = 19\n ** module chunks = 0\n **/","var _ = require(\"./util.js\");\n\nfunction State(option){\n  this._states = {};\n  this._pending = false;\n  this.visited = false;\n  if(option) this.config(option);\n}\n\n//regexp cache\nState.rCache = {};\n\n_.extend( _.emitable( State ), {\n\n  getTitle: function(options){\n    var cur = this ,title;\n    while( cur ){\n      title = cur.title;\n      if(title) return typeof title === 'function'? cur.title(options): cur.title\n      cur = cur.parent;\n    }\n    return title;\n  },\n\n\n  state: function(stateName, config){\n    if(_.typeOf(stateName) === \"object\"){\n      for(var j in stateName){\n        this.state(j, stateName[j]);\n      }\n      return this;\n    }\n    var current = this, next, nextName, states = this._states, i=0;\n\n    if( typeof stateName === \"string\" ) stateName = stateName.split(\".\");\n\n    var slen = stateName.length;\n    var stack = [];\n\n    do{\n      nextName = stateName[i];\n      next = states[nextName];\n      stack.push(nextName);\n      if(!next){\n        if(!config) return;\n        next = states[nextName] = new State();\n        _.extend(next, {\n          parent: current,\n          manager: current.manager || current,\n          name: stack.join(\".\"),\n          currentName: nextName\n        });\n        current.hasNext = true;\n        next.configUrl();\n      }\n      current = next;\n      states = next._states;\n    }while((++i) < slen )\n\n    if(config){\n       next.config(config);\n       return this;\n    } else {\n      return current;\n    }\n  },\n\n  config: function(configure){\n\n    configure = this._getConfig(configure);\n\n    for(var i in configure){\n      var prop = configure[i];\n      switch(i){\n        case \"url\":\n          if(typeof prop === \"string\"){\n            this.url = prop;\n            this.configUrl();\n          }\n          break;\n        case \"events\":\n          this.on(prop);\n          break;\n        default:\n          this[i] = prop;\n      }\n    }\n  },\n\n  // children override\n  _getConfig: function(configure){\n    return typeof configure === \"function\"? {enter: configure} : configure;\n  },\n\n  //from url\n  configUrl: function(){\n    var url = \"\" , base = this;\n\n    while( base ){\n\n      url = (typeof base.url === \"string\" ? base.url: (base.currentName || \"\")) + \"/\" + url;\n\n      // means absolute;\n      if(url.indexOf(\"^/\") === 0) {\n        url = url.slice(1);\n        break;\n      }\n      base = base.parent;\n    }\n    this.pattern = _.cleanPath(\"/\" + url);\n    var pathAndQuery = this.pattern.split(\"?\");\n    this.pattern = pathAndQuery[0];\n    // some Query we need watched\n\n    _.extend(this, _.normalize(this.pattern), true);\n  },\n  encode: function(param){\n    var state = this;\n    param = param || {};\n\n    var matched = \"%\";\n\n    var url = state.matches.replace(/\\(([\\w-]+)\\)/g, function(all, capture){\n      var sec = param[capture] || \"\";\n      matched+= capture + \"%\";\n      return sec;\n    }) + \"?\";\n\n    // remained is the query, we need concat them after url as query\n    for(var i in param) {\n      if( matched.indexOf(\"%\"+i+\"%\") === -1) url += i + \"=\" + param[i] + \"&\";\n    }\n    return _.cleanPath( url.replace(/(?:\\?|&)$/,\"\") );\n  },\n  decode: function( path ){\n    var matched = this.regexp.exec(path),\n      keys = this.keys;\n\n    if(matched){\n\n      var param = {};\n      for(var i =0,len=keys.length;i<len;i++){\n        param[keys[i]] = matched[i+1];\n      }\n      return param;\n    }else{\n      return false;\n    }\n  },\n  // by default, all lifecycle is permitted\n\n  async: function(){\n    throw new Error( 'please use option.async instead');\n  }\n\n});\n\nmodule.exports = State;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/stateman/src/state.js\n ** module id = 20\n ** module chunks = 0\n **/","\nvar Regular = require('regularjs');\n\nvar util = {\n  isPromiseLike: function (obj){\n    return !!obj && \n      (typeof obj === 'object' || typeof obj === 'function') \n      && typeof obj.then === 'function';\n  },\n  normPromise: function ( ret ){\n    return util.isPromiseLike(ret) ? ret: Promise.resolve(ret)\n  },\n  extend: Regular.util.extend,\n  extractState: (function(){\n    var rStateLink = /^([\\w-]+(?:\\.[\\w-]+)*)\\((.*)\\)$/;\n\n    // app.blog({id:3})\n    return function extractState( stateLinkExpr ){\n      stateLinkExpr = stateLinkExpr.replace(/\\s+/g, '');\n      var parsed = rStateLink.exec(stateLinkExpr);\n      if(parsed){\n        return {\n          name: parsed[1],\n          param: parsed[2]\n        }\n      }\n    }\n  })()\n\n}\n\n\n\n\nmodule.exports = util;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/util.js\n ** module id = 21\n ** module chunks = 0\n **/","var Regular = require('regularjs');\nvar u = require('./util');\nvar extend = u.extend;\n\nvar extension = require('./extension');\n\nfunction createRestate( Stateman ){\n\n  function Restate( options ){\n    options = options || {};\n    if( !(this instanceof Restate)) return new Restate( options );\n    extend(this, options);\n    extension( this);\n    Stateman.call(this, options);\n    \n  }\n\n  var so = Regular.util.createProto(Restate, Stateman.prototype)\n\n  extend(so, {\n    installData: function( option ){\n      var type = typeof  this.dataProvider, \n        ret,  state = option.state;\n\n      option.server = !Regular.env.browser;\n\n      if( type === 'function' ){\n        ret = this.dataProvider( option );\n      }else if(type === 'object'){\n        var dataProvider = this.dataProvider[ state.name];\n        ret = dataProvider && dataProvider.call(this, option);\n      }\n\n      return u.normPromise( ret )\n    },\n    installView: function( option ){\n      var  state = option.state ,Comp = state.view;\n      // if(typeof Comp !== 'function') throw Error('view of [' + state.name + '] with wrong type')\n      // Lazy load\n      if(state.ssr === false && Regular.env.node ) {\n        Comp = undefined;\n      } else if( !(Comp.prototype instanceof Regular) ){\n        Comp = Comp.call(this, option);\n      }\n      return u.normPromise( Comp );\n    },\n    install: function( option ){\n      return Promise.all([this.installData( option ), this.installView( option)]).then(function(ret){\n        return {\n          Component: ret[1],\n          data: ret[0]\n        }\n      })\n    }\n  })\n  return Restate;\n}\n\n\n\n\nmodule.exports = createRestate;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/base.js\n ** module id = 22\n ** module chunks = 0\n **/","var _ = require('./util');\nvar Regular = require('regularjs');\nvar dom = Regular.dom;\n\n\nfunction handleUrl(url, history){\n  return history.mode === 2? url : history.prefix + url\n}\n\nmodule.exports = function( stateman  ){\n\n  Regular.directive({\n    'r-view': {\n      link: function(element){\n        this.$viewport = element;\n      },\n      ssr: function( attr ){\n        return 'r-view'\n      }\n    },\n    'r-link': {\n      nps: true,\n      link: function(element, value){\n\n        // use html5 history\n        if(stateman.history.mode === 2){\n          dom.attr(element, 'data-autolink', 'data-autolink');\n        }\n        if(value && value.type === 'expression'){\n          \n          this.$watch( value, function( val){\n            dom.attr(element, 'href', \n              handleUrl(\n                val,\n                stateman.history\n              )\n            )\n          })\n          return;\n        }\n        var parsedLinkExpr = _.extractState(value);\n        if(parsedLinkExpr){\n\n          this.$watch( parsedLinkExpr.param, function(param){\n            dom.attr(element, 'href', \n              handleUrl(\n                stateman.encode(parsedLinkExpr.name, param),\n                stateman.history\n              )\n              \n            )\n          } , {deep: true} )\n        }else{\n\n          dom.attr(element, 'href', \n            handleUrl(\n              value,\n              stateman.history\n            )\n          )\n\n          \n        }\n      },\n      ssr: function( value, tag ){\n\n        if(value && value.type === 'expression'){\n          return 'href=\"' + Regular.util.escape(this.$get(value)) +  '\"' \n        }\n        var parsedLinkExpr = _.extractState(value);\n\n        if(parsedLinkExpr){\n          var param = this.$get(parsedLinkExpr.param);\n          return 'href=\"' + stateman.encode(parsedLinkExpr.name, param)+ '\"' \n        }else{\n        }\n      }\n    }\n  })\n}\n\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/extension.js\n ** module id = 23\n ** module chunks = 0\n **/","var Regular = require('regularjs');\nvar Stateman = require('stateman');\nvar _ = require('./util');\nvar dom =Regular.dom;\n\nvar createRestate = require('./base');\n\nvar Restate = createRestate( Stateman );\nvar so = Restate.prototype;\n\n\nvar oldStateFn = so.state;\nvar oldStart = so.start;\n\n\nso.start = function(options, callback){\n  var self = this;\n  options = options || {};\n  var ssr = options.ssr;\n  var view = options.view;\n  this.view = view;\n  // prevent default stateman autoLink feature \n  options.autolink = false;\n  if(ssr) {\n    // wont fix .\n    options.autofix = false;\n    options.html5 = true;\n  }\n  // delete unused options of stateman\n  delete options.ssr;\n  delete options.view;\n  if( ssr && window.history && \"onpopstate\" in window ){\n    this.ssr = true;\n    dom.on( document.body, \"click\", function(ev){\n      var target = ev.target, href;\n      if(target.getAttribute('data-autolink') != null){\n        ev.preventDefault();\n        href = dom.attr(target, 'href');\n        self.nav(href);\n      }\n    });\n  }\n  oldStart.call(this, options, callback)\n  return this;\n}\n\nso.state = function(name, config){\n  var manager = this;\n  var oldConfig, Component;\n  if( typeof name === 'string'){\n    if(!config) return oldStateFn.call(this, name)\n    oldConfig = config;\n    Component = oldConfig.view;\n\n    config = {\n      component: null,\n      enter: function( option ){\n        var globalView = manager.view;\n        var component = this.component;\n        var parent = this.parent, view;\n        var self = this;\n        var noComponent = !component || component.$phase === 'destroyed';\n        var ssr = option.ssr = option.firstTime && manager.ssr && this.ssr !== false;\n\n        var installOption = {\n          state: this,\n          ssr: ssr,\n          param: option.param,\n          component: component\n        }\n\n        return manager.install( installOption ).then( function( installed ){\n\n          Component = installed.Component;\n          if(parent.component){\n            view = parent.component.$viewport;\n            if(!view) throw self.parent.name + \" should have a element with [r-view]\";\n          }else{\n            view = globalView;\n          }\n\n          if( noComponent ){\n            // 这里需要给出提示\n            var mountNode = ssr && view;\n            component = self.component = new Component({\n              mountNode: mountNode,\n              data: _.extend({}, installed.data),\n              $state: manager\n            })\n          }else{\n            _.extend( component.data, installed.data, true)\n          }\n\n          if( !mountNode ) component.$inject(view);\n\n          var result = component.enter && component.enter(option);\n\n\n          return result;\n        }).then(function(){\n          component.$update(function(){\n            component.$mute(false);\n          })\n          return true;\n        })\n\n\n      \n      },\n      update: function( option ){\n\n        var component = this.component;\n        if(!component) return;\n\n        return manager.install({\n          component: component,\n          state: this,\n          param: option.param\n        }).then(function(data){\n\n          _.extend( component.data, data.data , true )\n          \n          return component.update && component.update(option);\n\n        }).then(function( ret){\n          component.$update();\n          return ret;\n        })\n\n      },\n      leave: function( option ){\n        var component = this.component;\n        if(!component) return;\n\n        var result = component.leave && component.leave(option);\n\n        component.$inject(false);\n        component.$mute(true);\n\n        return result;\n\n      }\n    }\n    _.extend(config, oldConfig)\n    return oldStateFn.call(this, name, config)    \n  }else{\n    for(var i in name){\n      this.state(i, name[i])\n    }\n    return this;\n  }\n}\n\n\n\nmodule.exports = Restate;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/client.js\n ** module id = 24\n ** module chunks = 0\n **/","var stateman;\n\nif( typeof window === 'object' ){\n  stateman = require(\"./manager/client.js\");\n  stateman.History = require(\"./history.js\");\n  stateman.util = require(\"./util.js\");\n  stateman.isServer = false;\n}else{\n  stateman = require(\"./manager/server.js\");\n  stateman.isServer = true;\n}\n\n\nstateman.State = require(\"./state.js\");\n\nmodule.exports = stateman;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/stateman/src/index.js\n ** module id = 25\n ** module chunks = 0\n **/","\nvar State = require(\"../state.js\"),\n  History = require(\"../history.js\"),\n  Base = require(\"./base.js\"),\n  _ = require(\"../util.js\"),\n  baseTitle = document.title,\n  stateFn = State.prototype.state;\n\nfunction StateMan(options){\n\n  if(this instanceof StateMan === false){ return new StateMan(options); }\n  options = options || {};\n  Base.call(this, options);\n  if(options.history) this.history = options.history;\n  this._stashCallback = [];\n  this.current = this.active = this;\n  // auto update document.title, when navigation has been down\n  this.on(\"end\", function( options ){\n    var cur = this.current;\n    document.title = cur.getTitle( options ) ||  baseTitle  ;\n  });\n}\n\nvar o =_.inherit( StateMan, Base.prototype );\n\n_.extend(o , {\n\n    start: function(options, callback){\n\n      this._startCallback = callback;\n      if( !this.history ) this.history = new History(options); \n      if( !this.history.isStart ){\n        this.history.on(\"change\", _.bind(this._afterPathChange, this));\n        this.history.start();\n      } \n      return this;\n\n    },\n    stop: function(){\n      this.history.stop();\n    },\n    // @TODO direct go the point state\n    go: function(state, option, callback){\n      option = option || {};\n      var statename;\n      if(typeof state === \"string\") {\n         statename = state;\n         state = this.state(state);\n      }\n\n      if(!state) return this._notfound({state:statename});\n\n      if(typeof option === \"function\"){\n        callback = option;\n        option = {};\n      }\n\n      if(option.encode !== false){\n        var url = state.encode(option.param);\n        option.path = url;\n        this.nav(url, {silent: true, replace: option.replace});\n      }\n\n      this._go(state, option, callback);\n\n      return this;\n    },\n    nav: function(url, options, callback){\n      if(typeof options === \"function\"){\n        callback = options;\n        options = {};\n      }\n      options = options || {};\n\n      options.path = url;\n\n      this.history.nav( url, _.extend({silent: true}, options));\n      if(!options.silent) this._afterPathChange( _.cleanPath(url) , options , callback);\n\n      return this;\n    },\n\n    // after pathchange changed\n    // @TODO: afterPathChange need based on decode\n    _afterPathChange: function(path, options ,callback){\n\n      this.emit(\"history:change\", path);\n\n      var found = this.decode(path);\n\n      options = options || {};\n\n      options.path = path;\n\n      if(!found){\n        return this._notfound(options);\n      }\n\n      options.param = found.param;\n\n      if( options.firstTime && !callback){\n        callback =  this._startCallback;\n        delete this._startCallback;\n      }\n\n      this._go( found.state, options, callback );\n    },\n    _notfound: function(options){\n\n\n      return this.emit(\"notfound\", options);\n    },\n    // goto the state with some option\n    _go: function(state, option, callback){\n\n      var over;\n\n  \n\n      if(state.hasNext && this.strict) return this._notfound({name: state.name});\n\n  \n      option.param = option.param || {};\n\n      var current = this.current,\n        baseState = this._findBase(current, state),\n        prepath = this.path,\n        self = this;\n\n\n      if( typeof callback === \"function\" ) this._stashCallback.push(callback);\n      // if we done the navigating when start\n      function done(success){\n        over = true;\n        if( success !== false ) self.emit(\"end\", option);\n        self.pending = null;\n        self._popStash(option);\n      }\n      \n      option.previous = current;\n      option.current = state;\n\n      if(current !== state){\n        option.stop = function(){\n          done(false);\n          self.nav( prepath? prepath: \"/\", {silent:true});\n        };\n        self.emit(\"begin\", option);\n\n      }\n      // if we stop it in 'begin' listener\n      if(over === true) return;\n\n      option.phase = 'permission';\n      this._walk(current, state, option, true , _.bind( function( notRejected ){\n\n        if( notRejected===false ){\n          // if reject in callForPermission, we will return to old \n          prepath && this.nav( prepath, {silent: true});\n\n          done(false, 2);\n\n          return this.emit('abort', option);\n\n        } \n\n        // stop previous pending.\n        if(this.pending) this.pending.stop();\n        this.pending = option;\n        this.path = option.path;\n        this.current = option.current;\n        this.param = option.param;\n        this.previous = option.previous;\n        option.phase = 'navigation';\n        this._walk(current, state, option, false, _.bind(function( notRejected ){\n\n          if( notRejected === false ){\n            this.current = this.active;\n            done(false);\n            return this.emit('abort', option);\n          }\n\n\n          this.active = option.current;\n\n          option.phase = 'completion';\n          return done();\n\n        }, this) );\n\n      }, this) );\n\n\n    },\n    _popStash: function(option){\n\n      var stash = this._stashCallback, len = stash.length;\n\n      this._stashCallback = [];\n\n      if(!len) return;\n\n      for(var i = 0; i < len; i++){\n        stash[i].call(this, option);\n      }\n    },\n\n    // the transition logic  Used in Both canLeave canEnter && leave enter LifeCycle\n\n    _walk: function(from, to, option, callForPermit , callback){\n      // if(from === to) return callback();\n\n      // nothing -> app.state\n      var parent = this._findBase(from , to);\n      var self = this;\n\n\n      option.backward = true;\n      this._transit( from, parent, option, callForPermit , function( notRejected ){\n\n        if( notRejected === false ) return callback( notRejected );\n\n        // only actual transiton need update base state;\n        option.backward = false;\n        self._walkUpdate(parent, option, callForPermit, function(notRejected){\n          if(notRejected === false) return callback(notRejected);\n\n          self._transit( parent, to, option, callForPermit,  callback);\n\n        });\n\n\n      });\n\n    },\n\n    _transit: function(from, to, option, callForPermit, callback){\n      //  touch the ending\n      if( from === to ) return callback();\n\n      var back = from.name.length > to.name.length;\n      var method = back? 'leave': 'enter';\n      var applied;\n\n      // use canEnter to detect permission\n      if( callForPermit) method = 'can' + method.replace(/^\\w/, function(a){ return a.toUpperCase(); });\n\n      var loop = _.bind(function( notRejected ){\n\n\n        // stop transition or touch the end\n        if( applied === to || notRejected === false ) return callback(notRejected);\n\n        if( !applied ) {\n\n          applied = back? from : this._computeNext(from, to);\n\n        }else{\n\n          applied = this._computeNext(applied, to);\n        }\n\n        if( (back && applied === to) || !applied )return callback( notRejected );\n\n        this._moveOn( applied, method, option, loop );\n\n      }, this);\n\n      loop();\n    },\n\n    _moveOn: function( applied, method, option, callback){\n\n      var isDone = false;\n      var isPending = false;\n\n      option.async = function(){\n\n        isPending = true;\n\n        return done;\n      };\n\n      function done( notRejected ){\n        if( isDone ) return;\n        isPending = false;\n        isDone = true;\n        callback( notRejected );\n      }\n\n      option.stop = function(){\n        done( false );\n      };\n\n\n      this.active = applied;\n      var retValue = applied[method]? applied[method]( option ): true;\n\n      if(method === 'enter') applied.visited = true;\n      // promise\n      // need breadk , if we call option.stop first;\n\n      if( _.isPromise(retValue) ){\n\n        return this._wrapPromise(retValue, done); \n\n      }\n\n      // if haven't call option.async yet\n      if( !isPending ) done( retValue );\n\n    },\n\n\n    _wrapPromise: function( promise, next ){\n\n      return promise.then( next, function(err){ \n        //TODO: 万一promise中throw了Error如何处理？\n        if(err instanceof Error) throw err;\n        next(false); \n      }) ;\n\n    },\n\n    _computeNext: function( from, to ){\n\n      var fname = from.name;\n      var tname = to.name;\n\n      var tsplit = tname.split('.');\n      var fsplit = fname.split('.');\n\n      var tlen = tsplit.length;\n      var flen = fsplit.length;\n\n      if(fname === '') flen = 0;\n      if(tname === '') tlen = 0;\n\n      if( flen < tlen ){\n        fsplit[flen] = tsplit[flen];\n      }else{\n        fsplit.pop();\n      }\n\n      return this.state(fsplit.join('.'));\n\n    },\n\n    _findQuery: function(querystr){\n\n      var queries = querystr && querystr.split(\"&\"), query= {};\n      if(queries){\n        var len = queries.length;\n        for(var i =0; i< len; i++){\n          var tmp = queries[i].split(\"=\");\n          query[tmp[0]] = tmp[1];\n        }\n      }\n      return query;\n\n    },\n\n    _sortState: function( a, b ){\n      return ( b.priority || 0 ) - ( a.priority || 0 );\n    },\n    // find the same branch;\n    _findBase: function(now, before){\n\n      if(!now || !before || now == this || before == this) return this;\n      var np = now, bp = before, tmp;\n      while(np && bp){\n        tmp = bp;\n        while(tmp){\n          if(np === tmp) return tmp;\n          tmp = tmp.parent;\n        }\n        np = np.parent;\n      }\n    },\n    // check the query and Param\n    _walkUpdate: function(baseState, options, callForPermit,  done){\n\n      var method = callForPermit? 'canUpdate': 'update';\n      var from = baseState;\n      var self = this;\n\n      if(from === this) return done();\n\n      var loop = function(notRejected){\n        if(notRejected === false) return done(false);\n        from = from.parent;\n        if(from === self) return done();\n        self._moveOn(from, method, options, loop)\n      }\n\n      self._moveOn(from, method, options, loop)\n    }\n\n}, true);\n\nmodule.exports = StateMan;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/stateman/src/manager/client.js\n ** module id = 26\n ** module chunks = 0\n **/","\n// MIT\n// Thx Backbone.js 1.1.2  and https://github.com/cowboy/jquery-hashchange/blob/master/jquery.ba-hashchange.js\n// for iframe patches in old ie.\n\nvar browser = require(\"./browser.js\");\nvar _ = require(\"./util.js\");\n\n\n// the mode const\nvar QUIRK = 3,\n  HASH = 1,\n  HISTORY = 2;\n\n// extract History for test\n// resolve the conficlt with the Native History\nfunction History(options){\n  options = options || {};\n\n  // Trick from backbone.history for anchor-faked testcase\n  this.location = options.location || browser.location;\n\n  // mode config, you can pass absolute mode (just for test);\n  this.html5 = options.html5;\n  this.mode = options.html5 && browser.history ? HISTORY: HASH;\n  if( !browser.hash ) this.mode = QUIRK;\n  if(options.mode) this.mode = options.mode;\n\n  // hash prefix , used for hash or quirk mode\n  this.prefix = \"#\" + (options.prefix || \"\") ;\n  this.rPrefix = new RegExp(this.prefix + '(.*)$');\n  this.interval = options.interval || 66;\n\n  // the root regexp for remove the root for the path. used in History mode\n  this.root = options.root ||  \"/\" ;\n  this.rRoot = new RegExp(\"^\" +  this.root);\n\n\n  this.autolink = options.autolink!==false;\n  this.autofix = options.autofix!==false;\n\n  this.curPath = undefined;\n}\n\n_.extend( _.emitable(History), {\n  // check the\n  start: function(callback){\n    var path = this.getPath();\n    this._checkPath = _.bind(this.checkPath, this);\n\n    if( this.isStart ) return;\n    this.isStart = true;\n\n    if(this.mode === QUIRK){\n      this._fixHashProbelm(path);\n    }\n\n    switch ( this.mode ){\n      case HASH:\n        browser.on(window, \"hashchange\", this._checkPath);\n        break;\n      case HISTORY:\n        browser.on(window, \"popstate\", this._checkPath);\n        break;\n      case QUIRK:\n        this._checkLoop();\n    }\n    // event delegate\n    this.autolink && this._autolink();\n    this.autofix && this._fixInitState();\n\n    this.curPath = path;\n\n    this.emit(\"change\", path, { firstTime: true});\n  },\n\n  // the history teardown\n  stop: function(){\n\n    browser.off(window, 'hashchange', this._checkPath);\n    browser.off(window, 'popstate', this._checkPath);\n    clearTimeout(this.tid);\n    this.isStart = false;\n    this._checkPath = null;\n  },\n\n  // get the path modify\n  checkPath: function(/*ev*/){\n\n    var path = this.getPath(), curPath = this.curPath;\n\n    //for oldIE hash history issue\n    if(path === curPath && this.iframe){\n      path = this.getPath(this.iframe.location);\n    }\n\n    if( path !== curPath ) {\n      this.iframe && this.nav(path, {silent: true});\n      this.curPath = path;\n      this.emit('change', path);\n    }\n  },\n\n  // get the current path\n  getPath: function(location){\n    location = location || this.location;\n    var tmp;\n\n    if( this.mode !== HISTORY ){\n      tmp = location.href.match(this.rPrefix);\n      return _.cleanPath(tmp && tmp[1]? tmp[1]: \"\");\n\n    }else{\n      return _.cleanPath(( location.pathname + location.search || \"\" ).replace( this.rRoot, \"/\" ));\n    }\n  },\n\n  nav: function(to, options ){\n\n    var iframe = this.iframe;\n\n    options = options || {};\n\n    to = _.cleanPath(to);\n\n    if(this.curPath == to) return;\n\n    // pushState wont trigger the checkPath\n    // but hashchange will\n    // so we need set curPath before to forbit the CheckPath\n    this.curPath = to;\n\n    // 3 or 1 is matched\n    if( this.mode !== HISTORY ){\n      this._setHash(this.location, to, options.replace);\n      if( iframe && this.getPath(iframe.location) !== to ){\n        if(!options.replace) iframe.document.open().close();\n        this._setHash(this.iframe.location, to, options.replace);\n      }\n    }else{\n      this._changeState(this.location, options.title||\"\", _.cleanPath( this.root + to ), options.replace )\n    }\n\n    if( !options.silent ) this.emit('change', to);\n  },\n  _autolink: function(){\n    if(this.mode!==HISTORY) return;\n    // only in html5 mode, the autolink is works\n    // if(this.mode !== 2) return;\n    var self = this;\n    browser.on( document.body, \"click\", function(ev){\n\n      var target = ev.target || ev.srcElement;\n      if( target.tagName.toLowerCase() !== \"a\" ) return;\n      var tmp = browser.isSameDomain(target.href)&&(browser.getHref(target)||\"\").match(self.rPrefix);\n\n      var hash = tmp && tmp[1]? tmp[1]: \"\";\n\n      if(!hash) return;\n\n      ev.preventDefault && ev.preventDefault();\n      self.nav( hash );\n      return (ev.returnValue = false);\n    } );\n  },\n  _setHash: function(location, path, replace){\n    var href = location.href.replace(/(javascript:|#).*$/, '');\n    if (replace){\n      location.replace(href + this.prefix+ path);\n    }\n    else location.hash = this.prefix+ path;\n  },\n  // for browser that not support onhashchange\n  _checkLoop: function(){\n    var self = this;\n    this.tid = setTimeout( function(){\n      self._checkPath();\n      self._checkLoop();\n    }, this.interval );\n  },\n  // if we use real url in hash env( browser no history popstate support)\n  // or we use hash in html5supoort mode (when paste url in other url)\n  // then , history should repara it\n  _fixInitState: function(){\n    var pathname = _.cleanPath(this.location.pathname), hash, hashInPathName;\n\n    // dont support history popstate but config the html5 mode\n    if( this.mode !== HISTORY && this.html5){\n\n      hashInPathName = pathname.replace(this.rRoot, \"\");\n      if(hashInPathName) this.location.replace(this.root + this.prefix + _.cleanPath(hashInPathName));\n\n    }else if( this.mode === HISTORY /* && pathname === this.root*/){\n\n      hash = this.location.hash.replace(this.prefix, \"\");\n      if(hash) this._changeState( this.location, document.title, _.cleanPath(this.root + hash));\n    }\n  },\n  // ONLY for test, forbid browser to update \n  _changeState: function(location, title, path, replace){\n    var history = location.history || window.history;\n    return history[replace? 'replaceState': 'pushState']({}, title , path)\n  },\n  // Thanks for backbone.history and https://github.com/cowboy/jquery-hashchange/blob/master/jquery.ba-hashchange.js\n  // for helping stateman fixing the oldie hash history issues when with iframe hack\n  _fixHashProbelm: function(path){\n    var iframe = document.createElement('iframe'), body = document.body;\n    iframe.src = 'javascript:;';\n    iframe.style.display = 'none';\n    iframe.tabIndex = -1;\n    iframe.title = \"\";\n    this.iframe = body.insertBefore(iframe, body.firstChild).contentWindow;\n    this.iframe.document.open().close();\n    this.iframe.location.hash = '#' + path;\n  }\n\n});\n\nmodule.exports = History;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/stateman/src/history.js\n ** module id = 27\n ** module chunks = 0\n **/","var win = window,\n    doc = document;\n\nmodule.exports = {\n  hash: \"onhashchange\" in win && (!doc.documentMode || doc.documentMode > 7),\n  history: win.history && \"onpopstate\" in win,\n  location: win.location,\n  isSameDomain: function(url){\n    var matched = url.match(/^.*?:\\/\\/([^/]*)/);\n    if(matched){\n      return matched[0] == this.location.origin;\n    }\n    return true;\n  },\n  getHref: function(node){\n    return \"href\" in node ? node.getAttribute(\"href\", 2) : node.getAttribute(\"href\");\n  },\n  on: \"addEventListener\" in win ?  // IE10 attachEvent is not working when binding the onpopstate, so we need check addEventLister first\n      function(node,type,cb){return node.addEventListener( type, cb )}\n    : function(node,type,cb){return node.attachEvent( \"on\" + type, cb )},\n\n  off: \"removeEventListener\" in win ? \n      function(node,type,cb){return node.removeEventListener( type, cb )}\n    : function(node,type,cb){return node.detachEvent( \"on\" + type, cb )}\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/stateman/src/browser.js\n ** module id = 28\n ** module chunks = 0\n **/"],"sourceRoot":""}